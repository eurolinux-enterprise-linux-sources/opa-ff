From ce0409c262e4e4797f831ecf18201730cdee050f Mon Sep 17 00:00:00 2001
From: Honggang Li <honli@redhat.com>
Date: Thu, 18 Aug 2016 03:34:40 -0400
Subject: [PATCH 4/4] Replace '/opt/opa' with '/usr/lib/opa-ff'

Signed-off-by: Honggang Li <honli@redhat.com>
---
 CommonInstall/comp_delta.pl                        | 68 +++++++++++-----------
 CommonInstall/comp_fastfabric.pl                   | 26 ++++-----
 CommonInstall/comp_ibdev.pl                        | 18 +++---
 CommonInstall/comp_ofed.pl                         | 68 +++++++++++-----------
 CommonInstall/comp_oftools.pl                      | 22 +++----
 CommonInstall/comp_omnipath.pl                     |  8 +--
 CommonInstall/comp_qlgc_fm.pl                      |  6 +-
 CommonInstall/do_build.sh                          |  6 +-
 CommonInstall/do_mvapich2_build.sh                 | 20 +++----
 CommonInstall/do_openmpi_build.sh                  | 20 +++----
 CommonInstall/main_delta.pl                        |  2 +-
 CommonInstall/main_ofed.pl                         |  2 +-
 CommonInstall/main_omnipathwrap.pl                 | 12 ++--
 CommonInstall/main_omnipathwrap_delta.pl           | 12 ++--
 CommonInstall/main_openibff.pl                     |  2 +-
 CommonInstall/mpi_apps.pl                          | 16 ++---
 CommonInstall/util_basicfile.pl                    |  2 +-
 CommonInstall/util_ifcfg.pl                        |  8 +--
 CommonInstall/util_init.pl                         |  4 +-
 IbaTools/FastFabric/chassis_configure.exp          |  2 +-
 IbaTools/FastFabric/chassis_fmconfig.exp           |  4 +-
 IbaTools/FastFabric/chassis_fmcontrol.exp          |  2 +-
 IbaTools/FastFabric/chassis_fmgetconfig.exp        |  2 +-
 IbaTools/FastFabric/chassis_fmgetsecurityfiles.exp |  2 +-
 IbaTools/FastFabric/chassis_fmsecurityfiles.exp    |  4 +-
 IbaTools/FastFabric/chassis_getconfig.exp          |  4 +-
 IbaTools/FastFabric/chassis_reboot.exp             |  2 +-
 IbaTools/FastFabric/chassis_upgrade.exp            |  4 +-
 IbaTools/FastFabric/configipoib.exp                |  8 +--
 IbaTools/FastFabric/ff_funcs.sh                    |  4 +-
 IbaTools/FastFabric/ff_function.exp                |  2 +-
 IbaTools/FastFabric/ipoibping.exp                  |  6 +-
 IbaTools/FastFabric/load.exp                       |  4 +-
 IbaTools/FastFabric/mpiperf.exp                    |  4 +-
 IbaTools/FastFabric/mpiperfdeviation.exp           |  4 +-
 IbaTools/FastFabric/opaallanalysis.sh              |  4 +-
 IbaTools/FastFabric/opacaptureall.sh               |  4 +-
 IbaTools/FastFabric/opachassisanalysis.sh          |  4 +-
 IbaTools/FastFabric/opacmdall.sh                   |  4 +-
 IbaTools/FastFabric/opadownloadall.sh              |  4 +-
 IbaTools/FastFabric/opaesmanalysis.sh              |  4 +-
 IbaTools/FastFabric/opaexpandfile.sh               |  4 +-
 IbaTools/FastFabric/opafabricanalysis.sh           |  4 +-
 .../FastFabric/opafastfabric.conf.LINUX.OPENIB     | 10 ++--
 IbaTools/FastFabric/opafastfabric.pl               | 32 +++++-----
 IbaTools/FastFabric/opahostsmanalysis.sh           |  4 +-
 IbaTools/FastFabric/opapingall.sh                  |  4 +-
 IbaTools/FastFabric/opascpall.sh                   |  8 +--
 IbaTools/FastFabric/opasetupssh.sh                 | 16 ++---
 IbaTools/FastFabric/opashowallports.sh             |  8 +--
 IbaTools/FastFabric/opaswdisableall.sh             |  6 +-
 IbaTools/FastFabric/opatest.sh                     | 10 ++--
 IbaTools/FastFabric/opauploadall.sh                |  4 +-
 IbaTools/FastFabric/reboot.exp                     |  4 +-
 IbaTools/FastFabric/sacache.exp                    |  6 +-
 IbaTools/FastFabric/switch_capture.exp             |  2 +-
 IbaTools/FastFabric/switch_configure.exp           |  2 +-
 IbaTools/FastFabric/switch_dump.exp                |  2 +-
 IbaTools/FastFabric/switch_fwverify.exp            |  2 +-
 IbaTools/FastFabric/switch_getconfig.exp           |  4 +-
 IbaTools/FastFabric/switch_hwvpd.exp               |  2 +-
 IbaTools/FastFabric/switch_info.exp                |  4 +-
 IbaTools/FastFabric/switch_ping.exp                |  2 +-
 IbaTools/FastFabric/switch_reboot.exp              |  2 +-
 IbaTools/FastFabric/switch_upgrade.exp             |  4 +-
 IbaTools/FastFabric/tcl_proc.sh                    |  4 +-
 IbaTools/FastFabric/upgrade.exp                    |  4 +-
 IbaTools/disable_ports/opadisableports.sh          |  4 +-
 IbaTools/disable_ports/opaenableports.sh           |  4 +-
 IbaTools/disable_ports/opaledports.sh              |  4 +-
 IbaTools/fabric_info/fabric_info.sh                |  6 +-
 IbaTools/man/opagentopology.manPage                | 12 ++--
 IbaTools/man/opagetvf_env.manPage                  |  2 +-
 IbaTools/man/opascpall.manPage                     |  2 +-
 IbaTools/man/opaverifyhosts.manPage                |  4 +-
 IbaTools/man/opaxlattopology.manPage               |  8 +--
 IbaTools/nodeverify/nodeverify.sh                  |  4 +-
 IbaTools/nodeverify/opaverifynodes.sh              | 12 ++--
 IbaTools/opacabletest/opacabletest.sh              |  4 +-
 IbaTools/opacheckload/opacheckload.sh              |  4 +-
 IbaTools/opafindgood/opafindgood.sh                |  6 +-
 IbaTools/opagenchassis/opagenchassis.sh            |  6 +-
 IbaTools/opagenesmchassis/opagenesmchassis.sh      |  4 +-
 IbaTools/opagenswitches/opagenswitches.sh          |  6 +-
 IbaTools/opalinkanalysis/opalinkanalysis.sh        |  4 +-
 IbaTools/opareport/opareports.sh                   |  4 +-
 IbaTools/opatop/opatop.c                           |  2 +-
 IbaTools/opaxlattopology/opaxlattopology.sh        |  4 +-
 IbaTools/opaxmlgenerate/README.topology            |  2 +-
 IbaTools/opaxmlgenerate/opagentopology.sh          |  8 +--
 IbaTools/saquery/opashowmc.sh                      |  4 +-
 LINUX/opacapture.sh                                |  6 +-
 Moab/README                                        |  2 +-
 Moab/iba_select_mpi                                |  4 +-
 ShmemApps/apps/README                              |  4 +-
 TestTools/basic.exp                                |  4 +-
 TestTools/chassis.exp                              |  4 +-
 TestTools/extmng.exp                               | 18 +++---
 TestTools/front.sh                                 |  2 +-
 TestTools/ibtools.exp                              |  2 +-
 TestTools/install.exp                              |  2 +-
 TestTools/mpi.exp                                  |  6 +-
 TestTools/network.exp                              |  2 +-
 TestTools/proc_mgr.exp                             |  2 +-
 opa-ff.spec                                        | 68 +++++++++++-----------
 105 files changed, 402 insertions(+), 402 deletions(-)

diff --git a/CommonInstall/comp_delta.pl b/CommonInstall/comp_delta.pl
index 5106b17..aff141c 100755
--- a/CommonInstall/comp_delta.pl
+++ b/CommonInstall/comp_delta.pl
@@ -2698,9 +2698,9 @@ sub install_opa_stack($$)
 
 	# Check $BASE_DIR directory ...exist 
 	check_config_dirs();
-	check_dir("/opt/opa");
+	check_dir("/usr/lib/opa-ff");
 
-	copy_systool_file("$srcdir/comp.pl", "/opt/opa/.comp_ofed_delta.pl");
+	copy_systool_file("$srcdir/comp.pl", "/usr/lib/opa-ff/.comp_ofed_delta.pl");
 
 	install_delta_comp('opa_stack', $install_list);
 
@@ -2794,8 +2794,8 @@ sub uninstall_opa_stack($$)
 	remove_udev_permissions;
 
 	system("rm -rf $ROOT$BASE_DIR/version_delta");
-	system("rm -rf $ROOT/opt/opa/.comp_delta.pl");
-	system "rmdir $ROOT/opt/opa 2>/dev/null";	# remove only if empty
+	system("rm -rf $ROOT/usr/lib/opa-ff/.comp_delta.pl");
+	system "rmdir $ROOT/usr/lib/opa-ff 2>/dev/null";	# remove only if empty
 	system "rmdir $ROOT$BASE_DIR 2>/dev/null";	# remove only if empty
 	system "rmdir $ROOT$OPA_CONFIG_DIR 2>/dev/null";	# remove only if empty
 
@@ -3777,9 +3777,9 @@ sub available_delta_mpisrc()
 sub installed_delta_mpisrc()
 {
 	return ((-e "$ROOT$BASE_DIR/version_delta"
-			&& file_glob("$ROOT/opt/opa/src/MPI/mvapich*.src.rpm") ne ""
-			&& file_glob("$ROOT/opt/opa/src/MPI/openmpi*.src.rpm") ne ""
-			&& file_glob("$ROOT/opt/opa/src/MPI/mpitests*.src.rpm") ne ""));
+			&& file_glob("$ROOT/usr/lib/opa-ff/src/MPI/mvapich*.src.rpm") ne ""
+			&& file_glob("$ROOT/usr/lib/opa-ff/src/MPI/openmpi*.src.rpm") ne ""
+			&& file_glob("$ROOT/usr/lib/opa-ff/src/MPI/mpitests*.src.rpm") ne ""));
 }
 
 # only called if installed_delta_mpisrc is true
@@ -3836,29 +3836,29 @@ sub install_delta_mpisrc($$)
 
 	print_install_banner_delta_comp('delta_mpisrc');
 	install_delta_comp('delta_mpisrc', $install_list);
-	check_dir("/opt/opa/src");
-	check_dir("/opt/opa/src/MPI");
+	check_dir("/usr/lib/opa-ff/src");
+	check_dir("/usr/lib/opa-ff/src/MPI");
 	# remove old versions (.src.rpm and built .rpm files too)
-	system "rm -rf $ROOT/opt/opa/src/MPI/mvapich[-_]*.rpm 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/mvapich2[-_]*.rpm 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/openmpi[-_]*.rpm 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/mpitests[-_]*.rpm 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/make.*.res 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/make.*.err 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/make.*.warn 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/.mpiinfo 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/mvapich[-_]*.rpm 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/mvapich2[-_]*.rpm 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/openmpi[-_]*.rpm 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/mpitests[-_]*.rpm 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/make.*.res 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/make.*.err 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/make.*.warn 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/.mpiinfo 2>/dev/null";
 
 	# install new versions
 	foreach my $srpm ( "mvapich2", "openmpi", "mpitests" ) {
 		my $srpmfile = file_glob("$srcdir/$SRPMS_SUBDIR/${srpm}-*.src.rpm");
 		if ( "$srpmfile" ne "" ) {
 			my $file = my_basename($srpmfile);
-			copy_data_file($srpmfile, "/opt/opa/src/MPI/$file");
+			copy_data_file($srpmfile, "/usr/lib/opa-ff/src/MPI/$file");
 		}
 	}
-	copy_systool_file("$srcdir/do_build", "/opt/opa/src/MPI/do_build");
-	copy_systool_file("$srcdir/do_mvapich2_build", "/opt/opa/src/MPI/do_mvapich2_build");
-	copy_systool_file("$srcdir/do_openmpi_build", "/opt/opa/src/MPI/do_openmpi_build");
+	copy_systool_file("$srcdir/do_build", "/usr/lib/opa-ff/src/MPI/do_build");
+	copy_systool_file("$srcdir/do_mvapich2_build", "/usr/lib/opa-ff/src/MPI/do_mvapich2_build");
+	copy_systool_file("$srcdir/do_openmpi_build", "/usr/lib/opa-ff/src/MPI/do_openmpi_build");
 
 	$ComponentWasInstalled{'delta_mpisrc'}=1;
 }
@@ -3878,21 +3878,21 @@ sub uninstall_delta_mpisrc($$)
 	print_uninstall_banner_delta_comp('delta_mpisrc');
 
 	# remove old versions (.src.rpm and built .rpm files too)
-	system "rm -rf $ROOT/opt/opa/src/MPI/mvapich2[-_]*.rpm 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/openmpi[-_]*.rpm 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/mpitests[-_]*.rpm 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/make.*.res 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/make.*.err 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/make.*.warn 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/.mpiinfo 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/do_build 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/do_mvapich2_build 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/do_openmpi_build 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/.mpiinfo 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/mvapich2[-_]*.rpm 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/openmpi[-_]*.rpm 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/mpitests[-_]*.rpm 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/make.*.res 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/make.*.err 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/make.*.warn 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/.mpiinfo 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/do_build 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/do_mvapich2_build 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/do_openmpi_build 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/.mpiinfo 2>/dev/null";
 
 	uninstall_delta_comp('delta_mpisrc', $install_list, $uninstalling_list, 'verbose');
-	system "rmdir $ROOT/opt/opa/src/MPI 2>/dev/null"; # remove only if empty
-	system "rmdir $ROOT/opt/opa/src 2>/dev/null"; # remove only if empty
+	system "rmdir $ROOT/usr/lib/opa-ff/src/MPI 2>/dev/null"; # remove only if empty
+	system "rmdir $ROOT/usr/lib/opa-ff/src 2>/dev/null"; # remove only if empty
 	$ComponentWasInstalled{'delta_mpisrc'}=0;
 }
 
diff --git a/CommonInstall/comp_fastfabric.pl b/CommonInstall/comp_fastfabric.pl
index f097308..bb147bc 100755
--- a/CommonInstall/comp_fastfabric.pl
+++ b/CommonInstall/comp_fastfabric.pl
@@ -38,7 +38,7 @@ use strict;
 # ==========================================================================
 # Fast Fabric installation
 
-my $FF_CONF_FILE = "/opt/opa/tools/opafastfabric.conf";
+my $FF_CONF_FILE = "/usr/lib/opa-ff/tools/opafastfabric.conf";
 my $FF_TLS_CONF_FILE = "/etc/sysconfig/opa/opaff.xml";
 sub available_fastfabric
 {
@@ -118,20 +118,20 @@ sub install_fastfabric
 		LogPrint "Installing $ComponentInfo{'fastfabric'}{'Name'} $version $DBG_FREE for $CUR_DISTRO_VENDOR $CUR_VENDOR_VER\n";
 	check_config_dirs();
 	if ( -e "$srcdir/comp.pl" ) {
-		check_dir("/opt/opa");
-		copy_systool_file("$srcdir/comp.pl", "/opt/opa/.comp_fastfabric.pl");
+		check_dir("/usr/lib/opa-ff");
+		copy_systool_file("$srcdir/comp.pl", "/usr/lib/opa-ff/.comp_fastfabric.pl");
 	}
 
 	my $rpmfile = rpm_resolve("$srcdir/RPMS/*/", "any", "opa-fastfabric");
 	rpm_run_install($rpmfile, "any", " -U ");
 
-	check_dir("/opt/opa/tools");
-	check_dir("/opt/opa/samples");
-	system "chmod ug+x $ROOT/opt/opa/samples/hostverify.sh";
-	system "rm -f $ROOT/opt/opa/samples/nodeverify.sh";
+	check_dir("/usr/lib/opa-ff/tools");
+	check_dir("/usr/lib/opa-ff/samples");
+	system "chmod ug+x $ROOT/usr/lib/opa-ff/samples/hostverify.sh";
+	system "rm -f $ROOT/usr/lib/opa-ff/samples/nodeverify.sh";
 
 	check_rpm_config_file("$FF_TLS_CONF_FILE");
-	printf("Default opaff.xml can be found in '/opt/opa/samples/opaff.xml-sample'\n");
+	printf("Default opaff.xml can be found in '/usr/lib/opa-ff/samples/opaff.xml-sample'\n");
 	check_rpm_config_file("$CONFIG_DIR/opa/opamon.conf");
 	check_rpm_config_file("$CONFIG_DIR/opa/opafastfabric.conf");
 	check_rpm_config_file("$CONFIG_DIR/opa/allhosts");
@@ -139,7 +139,7 @@ sub install_fastfabric
 	check_rpm_config_file("$CONFIG_DIR/opa/hosts");
 	check_rpm_config_file("$CONFIG_DIR/opa/ports");
 	check_rpm_config_file("$CONFIG_DIR/opa/switches");
-	check_rpm_config_file("/opt/opa/tools/osid_wrapper");
+	check_rpm_config_file("/usr/lib/opa-ff/tools/osid_wrapper");
 
 	#install_conf_file("$ComponentInfo{'fastfabric'}{'Name'}", "$FF_TLS_CONF_FILE", "$srcdir/fastfabric/tools/tls");
 	#remove_conf_file("$ComponentInfo{'fastfabric'}{'Name'}", "$OPA_CONFIG_DIR/iba_stat.conf");
@@ -179,11 +179,11 @@ sub uninstall_fastfabric
 
 	# remove samples we installed (or user compiled), however do not remove
 	# any logs or other files the user may have created
-	remove_installed_files "/opt/opa/samples";
-	system "rmdir $ROOT/opt/opa/samples 2>/dev/null";	# remove only if empty
+	remove_installed_files "/usr/lib/opa-ff/samples";
+	system "rmdir $ROOT/usr/lib/opa-ff/samples 2>/dev/null";	# remove only if empty
 
-	system("rm -rf $ROOT/opt/opa/.comp_fastfabric.pl");
-	system "rmdir $ROOT/opt/opa 2>/dev/null";	# remove only if empty
+	system("rm -rf $ROOT/usr/lib/opa-ff/.comp_fastfabric.pl");
+	system "rmdir $ROOT/usr/lib/opa-ff 2>/dev/null";	# remove only if empty
 	system "rmdir $ROOT$BASE_DIR 2>/dev/null";	# remove only if empty
 	system "rmdir $ROOT$OPA_CONFIG_DIR 2>/dev/null";	# remove only if empty
 	$ComponentWasInstalled{'fastfabric'}=0;
diff --git a/CommonInstall/comp_ibdev.pl b/CommonInstall/comp_ibdev.pl
index 2305b3c..fede0e6 100755
--- a/CommonInstall/comp_ibdev.pl
+++ b/CommonInstall/comp_ibdev.pl
@@ -116,12 +116,12 @@ sub install_ibdev
 	# remove samples installed in old location
 	remove_installed_files "/usr/local/src/iba_samples";
 	# Copy all ib sample applications
-	check_dir("/opt/opa/src");
-	check_dir("/opt/opa/src/iba_samples");
-	copy_all_data_files("$srcdir/iba_samples", "/opt/opa/src/iba_samples");
-	system "cd $ROOT/opt/opa/src/iba_samples; find . -type d| while read dir; do mv \$dir/Makefile.sample \$dir/Makefile 2>/dev/null; done 2>/dev/null";
-	system "cd $srcdir/iba_samples; find . | sed -e 's/Makefile.sample/Makefile/' > $ROOT/opt/opa/src/iba_samples/.files 2>/dev/null";
-	system "cd $srcdir/iba_samples; find * -maxdepth 1 -type d > $ROOT/opt/opa/src/iba_samples/.dirs 2>/dev/null";
+	check_dir("/usr/lib/opa-ff/src");
+	check_dir("/usr/lib/opa-ff/src/iba_samples");
+	copy_all_data_files("$srcdir/iba_samples", "/usr/lib/opa-ff/src/iba_samples");
+	system "cd $ROOT/usr/lib/opa-ff/src/iba_samples; find . -type d| while read dir; do mv \$dir/Makefile.sample \$dir/Makefile 2>/dev/null; done 2>/dev/null";
+	system "cd $srcdir/iba_samples; find . | sed -e 's/Makefile.sample/Makefile/' > $ROOT/usr/lib/opa-ff/src/iba_samples/.files 2>/dev/null";
+	system "cd $srcdir/iba_samples; find * -maxdepth 1 -type d > $ROOT/usr/lib/opa-ff/src/iba_samples/.dirs 2>/dev/null";
 	$ComponentWasInstalled{'ibdev'}=1;
 }
 
@@ -148,9 +148,9 @@ sub uninstall_ibdev
 	system "rm -rf $ROOT/usr/include/ipoib_export.h";
 	# remove iba_samples we installed or user compiled, however do not remove
 	# any logs or other files the user may have created
-	remove_installed_files "/opt/opa/src/iba_samples";
-	system "rmdir $ROOT/opt/opa/src 2>/dev/null";
-	system "rmdir $ROOT/opt/opa 2>/dev/null";
+	remove_installed_files "/usr/lib/opa-ff/src/iba_samples";
+	system "rmdir $ROOT/usr/lib/opa-ff/src 2>/dev/null";
+	system "rmdir $ROOT/usr/lib/opa-ff 2>/dev/null";
 	remove_installed_files "/usr/local/src/iba_samples";
 	$ComponentWasInstalled{'ibdev'}=0;
 }
diff --git a/CommonInstall/comp_ofed.pl b/CommonInstall/comp_ofed.pl
index 7afa1d3..f2e9c11 100755
--- a/CommonInstall/comp_ofed.pl
+++ b/CommonInstall/comp_ofed.pl
@@ -2631,9 +2631,9 @@ sub install_opa_stack($$)
 
 	# Check $BASE_DIR directory ...exist 
 	check_config_dirs();
-	check_dir("/opt/opa");
+	check_dir("/usr/lib/opa-ff");
 
-	copy_systool_file("$srcdir/comp.pl", "/opt/opa/.comp_ofed.pl");
+	copy_systool_file("$srcdir/comp.pl", "/usr/lib/opa-ff/.comp_ofed.pl");
 
 	install_ofed_comp('opa_stack', $install_list);
 
@@ -2732,8 +2732,8 @@ sub uninstall_opa_stack($$)
 	remove_udev_permissions;
 
 	system("rm -rf $ROOT$BASE_DIR/version_ofed");
-	system("rm -rf $ROOT/opt/opa/.comp_ofed.pl");
-	system "rmdir $ROOT/opt/opa 2>/dev/null";	# remove only if empty
+	system("rm -rf $ROOT/usr/lib/opa-ff/.comp_ofed.pl");
+	system "rmdir $ROOT/usr/lib/opa-ff 2>/dev/null";	# remove only if empty
 	system "rmdir $ROOT$BASE_DIR 2>/dev/null";	# remove only if empty
 	system "rmdir $ROOT$OPA_CONFIG_DIR 2>/dev/null";	# remove only if empty
 	if (0 != uninstall_old_stacks(0)) {
@@ -3995,9 +3995,9 @@ sub available_ofed_mpisrc()
 sub installed_ofed_mpisrc()
 {
 	return ((-e "$ROOT$BASE_DIR/version_ofed"
-			&& file_glob("$ROOT/opt/opa/src/MPI/mvapich*.src.rpm") ne ""
-			&& file_glob("$ROOT/opt/opa/src/MPI/openmpi*.src.rpm") ne ""
-			&& file_glob("$ROOT/opt/opa/src/MPI/mpitests*.src.rpm") ne ""));
+			&& file_glob("$ROOT/usr/lib/opa-ff/src/MPI/mvapich*.src.rpm") ne ""
+			&& file_glob("$ROOT/usr/lib/opa-ff/src/MPI/openmpi*.src.rpm") ne ""
+			&& file_glob("$ROOT/usr/lib/opa-ff/src/MPI/mpitests*.src.rpm") ne ""));
 }
 
 # only called if installed_ofed_mpisrc is true
@@ -4054,29 +4054,29 @@ sub install_ofed_mpisrc($$)
 
 	print_install_banner_ofed_comp('ofed_mpisrc');
 	install_ofed_comp('ofed_mpisrc', $install_list);
-	check_dir("/opt/opa/src");
-	check_dir("/opt/opa/src/MPI");
+	check_dir("/usr/lib/opa-ff/src");
+	check_dir("/usr/lib/opa-ff/src/MPI");
 	# remove old versions (.src.rpm and built .rpm files too)
-	system "rm -rf $ROOT/opt/opa/src/MPI/mvapich[-_]*.rpm 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/mvapich2[-_]*.rpm 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/openmpi[-_]*.rpm 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/mpitests[-_]*.rpm 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/make.*.res 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/make.*.err 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/make.*.warn 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/.mpiinfo 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/mvapich[-_]*.rpm 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/mvapich2[-_]*.rpm 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/openmpi[-_]*.rpm 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/mpitests[-_]*.rpm 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/make.*.res 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/make.*.err 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/make.*.warn 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/.mpiinfo 2>/dev/null";
 
 	# install new versions
 	foreach my $srpm ( "mvapich2", "openmpi", "mpitests" ) {
 		my $srpmfile = file_glob("$srcdir/$SRPMS_SUBDIR/${srpm}-*.src.rpm");
 		if ( "$srpmfile" ne "" ) {
 			my $file = my_basename($srpmfile);
-			copy_data_file($srpmfile, "/opt/opa/src/MPI/$file");
+			copy_data_file($srpmfile, "/usr/lib/opa-ff/src/MPI/$file");
 		}
 	}
-	copy_systool_file("$srcdir/do_build", "/opt/opa/src/MPI/do_build");
-	copy_systool_file("$srcdir/do_mvapich2_build", "/opt/opa/src/MPI/do_mvapich2_build");
-	copy_systool_file("$srcdir/do_openmpi_build", "/opt/opa/src/MPI/do_openmpi_build");
+	copy_systool_file("$srcdir/do_build", "/usr/lib/opa-ff/src/MPI/do_build");
+	copy_systool_file("$srcdir/do_mvapich2_build", "/usr/lib/opa-ff/src/MPI/do_mvapich2_build");
+	copy_systool_file("$srcdir/do_openmpi_build", "/usr/lib/opa-ff/src/MPI/do_openmpi_build");
 
 	$ComponentWasInstalled{'ofed_mpisrc'}=1;
 }
@@ -4096,21 +4096,21 @@ sub uninstall_ofed_mpisrc($$)
 	print_uninstall_banner_ofed_comp('ofed_mpisrc');
 
 	# remove old versions (.src.rpm and built .rpm files too)
-	system "rm -rf $ROOT/opt/opa/src/MPI/mvapich2[-_]*.rpm 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/openmpi[-_]*.rpm 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/mpitests[-_]*.rpm 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/make.*.res 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/make.*.err 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/make.*.warn 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/.mpiinfo 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/do_build 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/do_mvapich2_build 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/do_openmpi_build 2>/dev/null";
-	system "rm -rf $ROOT/opt/opa/src/MPI/.mpiinfo 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/mvapich2[-_]*.rpm 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/openmpi[-_]*.rpm 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/mpitests[-_]*.rpm 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/make.*.res 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/make.*.err 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/make.*.warn 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/.mpiinfo 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/do_build 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/do_mvapich2_build 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/do_openmpi_build 2>/dev/null";
+	system "rm -rf $ROOT/usr/lib/opa-ff/src/MPI/.mpiinfo 2>/dev/null";
 
 	uninstall_ofed_comp('ofed_mpisrc', $install_list, $uninstalling_list, 'verbose');
-	system "rmdir $ROOT/opt/opa/src/MPI 2>/dev/null"; # remove only if empty
-	system "rmdir $ROOT/opt/opa/src 2>/dev/null"; # remove only if empty
+	system "rmdir $ROOT/usr/lib/opa-ff/src/MPI 2>/dev/null"; # remove only if empty
+	system "rmdir $ROOT/usr/lib/opa-ff/src 2>/dev/null"; # remove only if empty
 	$ComponentWasInstalled{'ofed_mpisrc'}=0;
 }
 
diff --git a/CommonInstall/comp_oftools.pl b/CommonInstall/comp_oftools.pl
index 25660d0..a2c1998 100755
--- a/CommonInstall/comp_oftools.pl
+++ b/CommonInstall/comp_oftools.pl
@@ -117,11 +117,11 @@ sub install_oftools
 	check_config_dirs();
 
 	if ( -e "$srcdir/comp.pl" ) {
-		check_dir("/opt/opa");
-		copy_systool_file("$srcdir/comp.pl", "/opt/opa/.comp_oftools.pl");
+		check_dir("/usr/lib/opa-ff");
+		copy_systool_file("$srcdir/comp.pl", "/usr/lib/opa-ff/.comp_oftools.pl");
 	}
-	check_dir("/opt/opa/tools");
-	check_dir("/opt/opa/samples");
+	check_dir("/usr/lib/opa-ff/tools");
+	check_dir("/usr/lib/opa-ff/samples");
 
 	my $rpmfile = rpm_resolve("$srcdir/RPMS/*/", "any", "opa-basic-tools");
 	rpm_run_install($rpmfile, "any", " -U ");
@@ -156,21 +156,21 @@ sub uninstall_oftools
 	rpm_uninstall_list("any", "verbose", ("opa-basic-tools", "opa-address-resolution") );
 
 	# remove LSF and Moab related files
-	system("rm -rf $ROOT/opt/opa/LSF_scripts");
-	system("rm -rf $ROOT/opt/opa/Moab_scripts");
+	system("rm -rf $ROOT/usr/lib/opa-ff/LSF_scripts");
+	system("rm -rf $ROOT/usr/lib/opa-ff/Moab_scripts");
 
 	# may be created by opaverifyhosts
-	system("rm -rf $ROOT/opt/opa/tools/nodescript.sh");
-	system("rm -rf $ROOT/opt/opa/tools/nodeverify.sh");
+	system("rm -rf $ROOT/usr/lib/opa-ff/tools/nodescript.sh");
+	system("rm -rf $ROOT/usr/lib/opa-ff/tools/nodeverify.sh");
 
-	system "rmdir $ROOT/opt/opa/tools 2>/dev/null";	# remove only if empty
+	system "rmdir $ROOT/usr/lib/opa-ff/tools 2>/dev/null";	# remove only if empty
 
 	# oftools is a prereq of fastfabric can cleanup shared files here
 	system("rm -rf $ROOT$BASE_DIR/version_ff");
 	system "rmdir $ROOT$BASE_DIR 2>/dev/null";	# remove only if empty
 	system "rmdir $ROOT$OPA_CONFIG_DIR 2>/dev/null";	# remove only if empty
-	system("rm -rf $ROOT/opt/opa/.comp_oftools.pl");
-	system "rmdir $ROOT/opt/opa 2>/dev/null";	# remove only if empty
+	system("rm -rf $ROOT/usr/lib/opa-ff/.comp_oftools.pl");
+	system "rmdir $ROOT/usr/lib/opa-ff 2>/dev/null";	# remove only if empty
 	$ComponentWasInstalled{'oftools'}=0;
 }
 
diff --git a/CommonInstall/comp_omnipath.pl b/CommonInstall/comp_omnipath.pl
index 3ace8d2..1053605 100644
--- a/CommonInstall/comp_omnipath.pl
+++ b/CommonInstall/comp_omnipath.pl
@@ -75,7 +75,7 @@ sub install_generic_mpi
     #    rpm_install("$srcdir/OtherMPIs", "user", "$mpifullname");
     #}
     check_dir ("/opt/iba");
-    copy_systool_file ("$srcdir/comp.pl", "/opt/opa/.comp_$mpifullname.pl");
+    copy_systool_file ("$srcdir/comp.pl", "/usr/lib/opa-ff/.comp_$mpifullname.pl");
     
     $ComponentWasInstalled{$mpifullname} = 1;
 }
@@ -86,7 +86,7 @@ sub installed_generic_mpi
     my $compiler = $_[1];
     my $mpifullname = "$mpiname"."_$compiler"."_hfi";
 
-    return ( -e "$ROOT/opt/opa/.comp_$mpifullname.pl"
+    return ( -e "$ROOT/usr/lib/opa-ff/.comp_$mpifullname.pl"
 		   	|| rpm_is_installed ($mpifullname, "user") );
 }
 
@@ -126,8 +126,8 @@ sub uninstall_generic_mpi
 	}
     }
     
-    system ("rm -rf $ROOT/opt/opa/.comp_$mpifullname.pl");
-    system ("rmdir $ROOT/opt/opa 2>/dev/null"); # remove only if empty
+    system ("rm -rf $ROOT/usr/lib/opa-ff/.comp_$mpifullname.pl");
+    system ("rmdir $ROOT/usr/lib/opa-ff 2>/dev/null"); # remove only if empty
     $ComponentWasInstalled{$mpifullname} = 0;
 }
 
diff --git a/CommonInstall/comp_qlgc_fm.pl b/CommonInstall/comp_qlgc_fm.pl
index 42fd691..2e8b526 100755
--- a/CommonInstall/comp_qlgc_fm.pl
+++ b/CommonInstall/comp_qlgc_fm.pl
@@ -158,8 +158,8 @@ sub install_opafm
 	}
 
 	check_rpm_config_file("$CONFIG_DIR/opafm.xml");
-	check_dir("/opt/opa");
-	copy_systool_file("$srcdir/comp.pl", "/opt/opa/.comp_opafm.pl");
+	check_dir("/usr/lib/opa-ff");
+	copy_systool_file("$srcdir/comp.pl", "/usr/lib/opa-ff/.comp_opafm.pl");
 
 	if ($fm_start) {
 		enable_autostart("opafm");
@@ -185,7 +185,7 @@ sub uninstall_opafm
 	NormalPrint("Uninstalling $ComponentInfo{'opafm'}{'Name'}...\n");
 
 	rpm_uninstall_list("any", "verbose", ( "opa-fm", "opa-fm-debuginfo") );
-	system("rm -rf $ROOT/opt/opa/.comp_opafm.pl");
+	system("rm -rf $ROOT/usr/lib/opa-ff/.comp_opafm.pl");
 	system("rmdir -p $ROOT/opt/iba/fm_tools 2>/dev/null");  # remove only if empty
 	system("rm -rf $ROOT/usr/lib/opa-fm");
 	$ComponentWasInstalled{'opafm'}=0;
diff --git a/CommonInstall/do_build.sh b/CommonInstall/do_build.sh
index 8b4168e..bea5f4d 100755
--- a/CommonInstall/do_build.sh
+++ b/CommonInstall/do_build.sh
@@ -61,7 +61,7 @@ Usage()
 	echo "            Default is '/'" >&2
 	echo "" >&2
 	echo "The RPMs built during this process will be installed on this system" >&2
-	echo "they can also be found in /opt/opa/src/MPI" >&2
+	echo "they can also be found in /usr/lib/opa-ff/src/MPI" >&2
 	exit 2
 }
 
@@ -85,10 +85,10 @@ then
 	echo "You must be 'root' to run this program" >&2
 	exit 1
 fi
-cd /opt/opa/src/MPI
+cd /usr/lib/opa-ff/src/MPI
 if [ $? != 0 ]
 then
-	echo "Unable to cd to /opt/opa/src/MPI" >&2
+	echo "Unable to cd to /usr/lib/opa-ff/src/MPI" >&2
 	exit 1
 fi
 
diff --git a/CommonInstall/do_mvapich2_build.sh b/CommonInstall/do_mvapich2_build.sh
index 003a45c..b0bab79 100755
--- a/CommonInstall/do_mvapich2_build.sh
+++ b/CommonInstall/do_mvapich2_build.sh
@@ -116,7 +116,7 @@ Usage()
 	echo "            Default is '/'" >&2
 	echo "" >&2
 	echo "The RPMs built during this process will be installed on this system" >&2
-	echo "they can also be found in /opt/opa/src/MPI" >&2
+	echo "they can also be found in /usr/lib/opa-ff/src/MPI" >&2
 	exit 2
 }
 
@@ -208,10 +208,10 @@ then
 fi
 if [ "$iflag" = n ]
 then
-	cd /opt/opa/src/MPI
+	cd /usr/lib/opa-ff/src/MPI
 	if [ $? != 0 ]
 	then
-		echo "ERROR: Unable to cd to /opt/opa/src/MPI" >&2
+		echo "ERROR: Unable to cd to /usr/lib/opa-ff/src/MPI" >&2
 		exit 1
 	fi
 fi
@@ -413,11 +413,11 @@ logfile=make.mvapich2.$interface.$compiler
 	BUILD_DIR=${BUILD_DIR:-/var/tmp/Intel-mvapich2}
 	BUILD_ROOT="$BUILD_DIR/build";
 	RPM_DIR="$BUILD_DIR/OFEDRPMS";
-	DESTDIR=/opt/opa/src/MPI
+	DESTDIR=/usr/lib/opa-ff/src/MPI
 	if [ "$iflag" = n ]
 	then
-	    mvapich2_srpm=/opt/opa/src/MPI/mvapich2-*.src.rpm
-	    mpitests_srpm=/opt/opa/src/MPI/mpitests-*.src.rpm
+	    mvapich2_srpm=/usr/lib/opa-ff/src/MPI/mvapich2-*.src.rpm
+	    mpitests_srpm=/usr/lib/opa-ff/src/MPI/mpitests-*.src.rpm
 	else
 	    mvapich2_srpm=./SRPMS/mvapich2-*.src.rpm
 	    mpitests_srpm=./SRPMS/mpitests-*.src.rpm
@@ -456,10 +456,10 @@ logfile=make.mvapich2.$interface.$compiler
 	echo "=========================================================="
 	if [ "$iflag" = n ]
 	then
-		echo "MPICH_PREFIX='$MPICH_PREFIX'"> /opt/opa/src/MPI/.mpiinfo
-		#echo "MPI_RUNTIME='$MPICH_PREFIX/bin $MPICH_PREFIX/lib $MPICH_PREFIX/tests'">> /opt/opa/src/MPI/.mpiinfo
-		echo "MPI_RPMS='mvapich2_$compiler$mvapich2_rpm_suffix-$mvapich2_fullversion.$target_cpu.rpm mpitests_mvapich2_$compiler$mvapich2_rpm_suffix-$mpitests_fullversion.$target_cpu.rpm'">> /opt/opa/src/MPI/.mpiinfo
-		chmod +x /opt/opa/src/MPI/.mpiinfo
+		echo "MPICH_PREFIX='$MPICH_PREFIX'"> /usr/lib/opa-ff/src/MPI/.mpiinfo
+		#echo "MPI_RUNTIME='$MPICH_PREFIX/bin $MPICH_PREFIX/lib $MPICH_PREFIX/tests'">> /usr/lib/opa-ff/src/MPI/.mpiinfo
+		echo "MPI_RPMS='mvapich2_$compiler$mvapich2_rpm_suffix-$mvapich2_fullversion.$target_cpu.rpm mpitests_mvapich2_$compiler$mvapich2_rpm_suffix-$mpitests_fullversion.$target_cpu.rpm'">> /usr/lib/opa-ff/src/MPI/.mpiinfo
+		chmod +x /usr/lib/opa-ff/src/MPI/.mpiinfo
 	fi
 
 	echo
diff --git a/CommonInstall/do_openmpi_build.sh b/CommonInstall/do_openmpi_build.sh
index 310b6f2..cb9cc7d 100755
--- a/CommonInstall/do_openmpi_build.sh
+++ b/CommonInstall/do_openmpi_build.sh
@@ -116,7 +116,7 @@ Usage()
 	echo "            Default is '/'" >&2
 	echo "" >&2
 	echo "The RPMs built during this process will be installed on this system" >&2
-	echo "they can also be found in /opt/opa/src/MPI" >&2
+	echo "they can also be found in /usr/lib/opa-ff/src/MPI" >&2
 	exit 2
 }
 
@@ -205,10 +205,10 @@ then
 fi
 if [ "$iflag" = n ]
 then
-	cd /opt/opa/src/MPI
+	cd /usr/lib/opa-ff/src/MPI
 	if [ $? != 0 ]
 	then
-		echo "ERROR: Unable to cd to /opt/opa/src/MPI" >&2
+		echo "ERROR: Unable to cd to /usr/lib/opa-ff/src/MPI" >&2
 		exit 1
 	fi
 fi
@@ -350,11 +350,11 @@ logfile=make.openmpi.$interface.$compiler
 	BUILD_DIR=${BUILD_DIR:-/var/tmp/Intel-openmpi}
 	BUILD_ROOT="$BUILD_DIR/build";
 	RPM_DIR="$BUILD_DIR/OFEDRPMS";
-	DESTDIR=/opt/opa/src/MPI
+	DESTDIR=/usr/lib/opa-ff/src/MPI
 	if [ "$iflag" = n ]
 	then
-		openmpi_srpm=/opt/opa/src/MPI/openmpi-*.src.rpm
-		mpitests_srpm=/opt/opa/src/MPI/mpitests-*.src.rpm
+		openmpi_srpm=/usr/lib/opa-ff/src/MPI/openmpi-*.src.rpm
+		mpitests_srpm=/usr/lib/opa-ff/src/MPI/mpitests-*.src.rpm
 	else
 		openmpi_srpm=./SRPMS/openmpi-*.src.rpm
 		mpitests_srpm=./SRPMS/mpitests-*.src.rpm
@@ -393,10 +393,10 @@ logfile=make.openmpi.$interface.$compiler
 	echo "=========================================================="
 	if [ "$iflag" = n ]
 	then
-		echo "MPICH_PREFIX='$MPICH_PREFIX'"> /opt/opa/src/MPI/.mpiinfo
-		#echo "MPI_RUNTIME='$MPICH_PREFIX/bin $MPICH_PREFIX/lib* $MPICH_PREFIX/etc $MPICH_PREFIX/share $MPICH_PREFIX/tests'">> /opt/opa/src/MPI/.mpiinfo
-		echo "MPI_RPMS='openmpi_$compiler$openmpi_rpm_suffix-$openmpi_fullversion.$target_cpu.rpm mpitests_openmpi_$compiler$openmpi_rpm_suffix-$mpitests_fullversion.$target_cpu.rpm'">> /opt/opa/src/MPI/.mpiinfo
-		chmod +x /opt/opa/src/MPI/.mpiinfo
+		echo "MPICH_PREFIX='$MPICH_PREFIX'"> /usr/lib/opa-ff/src/MPI/.mpiinfo
+		#echo "MPI_RUNTIME='$MPICH_PREFIX/bin $MPICH_PREFIX/lib* $MPICH_PREFIX/etc $MPICH_PREFIX/share $MPICH_PREFIX/tests'">> /usr/lib/opa-ff/src/MPI/.mpiinfo
+		echo "MPI_RPMS='openmpi_$compiler$openmpi_rpm_suffix-$openmpi_fullversion.$target_cpu.rpm mpitests_openmpi_$compiler$openmpi_rpm_suffix-$mpitests_fullversion.$target_cpu.rpm'">> /usr/lib/opa-ff/src/MPI/.mpiinfo
+		chmod +x /usr/lib/opa-ff/src/MPI/.mpiinfo
 	fi
 
 	echo
diff --git a/CommonInstall/main_delta.pl b/CommonInstall/main_delta.pl
index 1b8c063..431cdab 100755
--- a/CommonInstall/main_delta.pl
+++ b/CommonInstall/main_delta.pl
@@ -533,7 +533,7 @@ sub Usage
 		printf STDERR "            default options and no change to autostart options\n";
 		printf STDERR "       -i comp - install the given component with default options\n";
 		printf STDERR "            can appear more than once on command line\n";
-		#printf STDERR "       -l - skip creating/removing symlinks to /usr/local from /opt/opa\n";
+		#printf STDERR "       -l - skip creating/removing symlinks to /usr/local from /usr/lib/opa-ff\n";
 		printf STDERR "       --user_configure_options 'options' - specify additional OFA build\n";
 		printf STDERR "             options for user space srpms.  Causes rebuild of all user srpms\n";
 		printf STDERR "       --kernel_configure_options 'options' - specify additional OFA build\n";
diff --git a/CommonInstall/main_ofed.pl b/CommonInstall/main_ofed.pl
index cd6c432..375a953 100755
--- a/CommonInstall/main_ofed.pl
+++ b/CommonInstall/main_ofed.pl
@@ -495,7 +495,7 @@ sub Usage
 		printf STDERR "            default options and no change to autostart options\n";
 		printf STDERR "       -i comp - install the given component with default options\n";
 		printf STDERR "            can appear more than once on command line\n";
-		#printf STDERR "       -l - skip creating/removing symlinks to /usr/local from /opt/opa\n";
+		#printf STDERR "       -l - skip creating/removing symlinks to /usr/local from /usr/lib/opa-ff\n";
 		printf STDERR "       --user_configure_options 'options' - specify additional OFED build\n";
 		printf STDERR "             options for user space srpms.  Causes rebuild of all user srpms\n";
 		printf STDERR "       --kernel_configure_options 'options' - specify additional OFED build\n";
diff --git a/CommonInstall/main_omnipathwrap.pl b/CommonInstall/main_omnipathwrap.pl
index 22dc500..82d6f7a 100644
--- a/CommonInstall/main_omnipathwrap.pl
+++ b/CommonInstall/main_omnipathwrap.pl
@@ -556,16 +556,16 @@ sub source_comp
 			LogPrint "Loaded $ComponentInfo{$comp}{'Name'} script: $ComponentInfo{$comp}{'SrcDir'}/comp.pl\n";
 		}
 		#eval "available_$comp";
-	} elsif ( -e "$ROOT/opt/opa/.comp_$comp.pl" ) {
+	} elsif ( -e "$ROOT/usr/lib/opa-ff/.comp_$comp.pl" ) {
 		# source the installed file, mainly to aid uninstall
-		#print "$ROOT/opt/opa/.comp_$comp.pl\n"; sleep 10;
-		eval `cat "$ROOT/opt/opa/.comp_$comp.pl"`;
+		#print "$ROOT/usr/lib/opa-ff/.comp_$comp.pl\n"; sleep 10;
+		eval `cat "$ROOT/usr/lib/opa-ff/.comp_$comp.pl"`;
 		if ( "$@" ne "" ) {
 			NormalPrint "$@\n";
-			NormalPrint "Warning: Ignoring Corrupted $ComponentInfo{$comp}{'Name'} script: $ROOT/opt/opa/.comp_$comp.pl\n";
+			NormalPrint "Warning: Ignoring Corrupted $ComponentInfo{$comp}{'Name'} script: $ROOT/usr/lib/opa-ff/.comp_$comp.pl\n";
 			HitKeyCont;
 		} else {
-			LogPrint "Loaded $ComponentInfo{$comp}{'Name'} script: $ROOT/opt/opa/.comp_$comp.pl\n";
+			LogPrint "Loaded $ComponentInfo{$comp}{'Name'} script: $ROOT/usr/lib/opa-ff/.comp_$comp.pl\n";
 		}
 	} else {
 		# component not available and not installed
@@ -632,7 +632,7 @@ sub Usage
 		printf STDERR "       -i comp - install the given component with default options\n";
 		printf STDERR "            can appear more than once on command line\n";
 #		printf STDERR "       -f - skip HCA firmware upgrade during install\n";
-		#printf STDERR "       -l - skip creating/removing symlinks to /usr/local from /opt/opa\n";
+		#printf STDERR "       -l - skip creating/removing symlinks to /usr/local from /usr/lib/opa-ff\n";
 		printf STDERR "       --user_configure_options 'options' - specify additional OFA build\n";
 		printf STDERR "             options for user space srpms.  Causes rebuild of all user srpms\n";
 		printf STDERR "       --kernel_configure_options 'options' - specify additional OFA build\n";
diff --git a/CommonInstall/main_omnipathwrap_delta.pl b/CommonInstall/main_omnipathwrap_delta.pl
index afd4449..dd0c6b0 100644
--- a/CommonInstall/main_omnipathwrap_delta.pl
+++ b/CommonInstall/main_omnipathwrap_delta.pl
@@ -739,16 +739,16 @@ sub source_comp
 			LogPrint "Loaded $ComponentInfo{$comp}{'Name'} script: $ComponentInfo{$comp}{'SrcDir'}/comp.pl\n";
 		}
 		#eval "available_$comp";
-	} elsif ( -e "$ROOT/opt/opa/.comp_$comp.pl" ) {
+	} elsif ( -e "$ROOT/usr/lib/opa-ff/.comp_$comp.pl" ) {
 		# source the installed file, mainly to aid uninstall
-		#print "$ROOT/opt/opa/.comp_$comp.pl\n"; sleep 10;
-		eval `cat "$ROOT/opt/opa/.comp_$comp.pl"`;
+		#print "$ROOT/usr/lib/opa-ff/.comp_$comp.pl\n"; sleep 10;
+		eval `cat "$ROOT/usr/lib/opa-ff/.comp_$comp.pl"`;
 		if ( "$@" ne "" ) {
 			NormalPrint "$@\n";
-			NormalPrint "Warning: Ignoring Corrupted $ComponentInfo{$comp}{'Name'} script: $ROOT/opt/opa/.comp_$comp.pl\n";
+			NormalPrint "Warning: Ignoring Corrupted $ComponentInfo{$comp}{'Name'} script: $ROOT/usr/lib/opa-ff/.comp_$comp.pl\n";
 			HitKeyCont;
 		} else {
-			LogPrint "Loaded $ComponentInfo{$comp}{'Name'} script: $ROOT/opt/opa/.comp_$comp.pl\n";
+			LogPrint "Loaded $ComponentInfo{$comp}{'Name'} script: $ROOT/usr/lib/opa-ff/.comp_$comp.pl\n";
 		}
 	} else {
 		# component not available and not installed
@@ -817,7 +817,7 @@ sub Usage
 		printf STDERR "       -i comp - install the given component with default options\n";
 		printf STDERR "            can appear more than once on command line\n";
 #		printf STDERR "       -f - skip HCA firmware upgrade during install\n";
-		#printf STDERR "       -l - skip creating/removing symlinks to /usr/local from /opt/opa\n";
+		#printf STDERR "       -l - skip creating/removing symlinks to /usr/local from /usr/lib/opa-ff\n";
 		printf STDERR "       --user_configure_options 'options' - specify additional OFA build\n";
 		printf STDERR "             options for user space srpms.  Causes rebuild of all user srpms\n";
 		printf STDERR "       --kernel_configure_options 'options' - specify additional OFA build\n";
diff --git a/CommonInstall/main_openibff.pl b/CommonInstall/main_openibff.pl
index 8176083..7562df4 100755
--- a/CommonInstall/main_openibff.pl
+++ b/CommonInstall/main_openibff.pl
@@ -250,7 +250,7 @@ sub Usage
 		printf STDERR "       -i comp - install the given component with default options\n";
 		printf STDERR "            can appear more than once on command line\n";
 #		printf STDERR "       -f - skip HCA firmware upgrade during install\n";
-		#printf STDERR "       -l - skip creating/removing symlinks to /usr/local from /opt/opa\n";
+		#printf STDERR "       -l - skip creating/removing symlinks to /usr/local from /usr/lib/opa-ff\n";
 		printf STDERR "       --without-depcheck - disable check of OS dependencies\n";
 		printf STDERR "       --force - force install even if distos don't match\n";
 		printf STDERR "                 Use of this option can result in undefined behaviors\n";
diff --git a/CommonInstall/mpi_apps.pl b/CommonInstall/mpi_apps.pl
index ded6b88..e526657 100755
--- a/CommonInstall/mpi_apps.pl
+++ b/CommonInstall/mpi_apps.pl
@@ -67,23 +67,23 @@ sub install_shmem_apps($)
 	uninstall_shmem_apps;
 
 	# Copy all shmem sample applications
-	check_dir("/opt/opa/src");
-	check_dir("/opt/opa/src/shmem_apps");
+	check_dir("/usr/lib/opa-ff/src");
+	check_dir("/usr/lib/opa-ff/src/shmem_apps");
 	if ( -e "$srcdir/shmem/shmem_apps/shmem_apps.tgz" )
 	{
-		system("tar xfvz $srcdir/shmem/shmem_apps/shmem_apps.tgz --directory $ROOT/opt/opa/src/shmem_apps > $ROOT/opt/opa/src/shmem_apps/.files");
+		system("tar xfvz $srcdir/shmem/shmem_apps/shmem_apps.tgz --directory $ROOT/usr/lib/opa-ff/src/shmem_apps > $ROOT/opt/opa/src/shmem_apps/.files");
 	}
 	# allow all users to read the files so they can copy and use
-	system("chmod -R ugo+r $ROOT/opt/opa/src/shmem_apps");
-	system("find $ROOT/opt/opa/src/shmem_apps -type d|xargs chmod ugo+x");
+	system("chmod -R ugo+r $ROOT/usr/lib/opa-ff/src/shmem_apps");
+	system("find $ROOT/usr/lib/opa-ff/src/shmem_apps -type d|xargs chmod ugo+x");
 }
 
 sub uninstall_shmem_apps()
 {
 	# remove shmem_apps we installed or user compiled, however do not remove
 	# any logs or other files the user may have created
-	remove_shmem_apps "/opt/opa/src/shmem_apps";
-	system "rmdir $ROOT/opt/opa/src 2>/dev/null";	# remove only if empty
-	system "rmdir $ROOT/opt/opa 2>/dev/null";	# remove only if empty
+	remove_shmem_apps "/usr/lib/opa-ff/src/shmem_apps";
+	system "rmdir $ROOT/usr/lib/opa-ff/src 2>/dev/null";	# remove only if empty
+	system "rmdir $ROOT/usr/lib/opa-ff 2>/dev/null";	# remove only if empty
 }
 
diff --git a/CommonInstall/util_basicfile.pl b/CommonInstall/util_basicfile.pl
index f6e9afb..35b9017 100755
--- a/CommonInstall/util_basicfile.pl
+++ b/CommonInstall/util_basicfile.pl
@@ -326,7 +326,7 @@ sub copy_shlib($$$)
 
 sub symlink_usrlocal_shlib($$$)
 {
-	# a /opt/opa path w/o suffix (eg. a previous dest for copy_shlib)
+	# a /usr/lib/opa-ff path w/o suffix (eg. a previous dest for copy_shlib)
 	my($src) = shift();
 	my($libbase) = shift();
 	my($version) = shift();
diff --git a/CommonInstall/util_ifcfg.pl b/CommonInstall/util_ifcfg.pl
index 6a64b64..f322508 100755
--- a/CommonInstall/util_ifcfg.pl
+++ b/CommonInstall/util_ifcfg.pl
@@ -169,7 +169,7 @@ sub Get_IP_Addr_Netmask($$)
 	if ( "$ipaddr" eq "dhcp" ) {
 		return "";
 	}
-	$default_netmask = `/opt/opa/tools/opaipcalc --netmask $ipaddr`;
+	$default_netmask = `/usr/lib/opa-ff/tools/opaipcalc --netmask $ipaddr`;
 	$default_netmask =~ s/NETMASK=//;
 	$default_netmask =~ s/\n//;
 	$_ = $ipaddr;		# setup for translate & other cmds
@@ -318,7 +318,7 @@ sub Build_ifcfg($$$)
 			system $SysCmd;
 
 			# append the network
-			$temp = `/opt/opa/tools/opaipcalc --network $ipaddr $netmask`;
+			$temp = `/usr/lib/opa-ff/tools/opaipcalc --network $ipaddr $netmask`;
 			chomp($temp);
 			$temp =~ s/NETWORK=//;
 			$SysCmd = "echo \"NETWORK=\'$temp\'\" >> $target";
@@ -326,7 +326,7 @@ sub Build_ifcfg($$$)
 			system $SysCmd;
 
 			# append the broadcast
-			$temp = `/opt/opa/tools/opaipcalc --broadcast $ipaddr $netmask`;
+			$temp = `/usr/lib/opa-ff/tools/opaipcalc --broadcast $ipaddr $netmask`;
 			chomp($temp);
 			$temp =~ s/BROADCAST=//;
 			$SysCmd = "echo \"BROADCAST=\'$temp\'\" >> $target";
@@ -383,7 +383,7 @@ sub Build_ifcfg($$$)
 			system $SysCmd;
 
 			# append the network,broadcast
-			$SysCmd = "/opt/opa/tools/opaipcalc --network --broadcast $ipaddr $netmask >> $target";
+			$SysCmd = "/usr/lib/opa-ff/tools/opaipcalc --network --broadcast $ipaddr $netmask >> $target";
 			DebugPrint("cmd '$SysCmd'\n");
 			system $SysCmd;
 
diff --git a/CommonInstall/util_init.pl b/CommonInstall/util_init.pl
index 5f6bb72..eb3c705 100755
--- a/CommonInstall/util_init.pl
+++ b/CommonInstall/util_init.pl
@@ -175,7 +175,7 @@ sub dot_version($)
 my $LIB_DIR = "/lib";
 my $UVP_LIB_DIR = "/lib";
 my $USRLOCALLIB_DIR = "/usr/local/lib";
-my $OPTIBALIB_DIR = "/opt/opa/lib";
+my $OPTIBALIB_DIR = "/usr/lib/opa-ff/lib";
 my $USRLIB_DIR = "/usr/lib";
 # if different from $LIB_DIR, where to remove libraries from past release
 my $OLD_LIB_DIR = "/lib";
@@ -191,7 +191,7 @@ sub set_libdir()
 		$UVP_CONF_FILE_SOURCE = "uvp.conf.64";
 		$DAT_CONF_FILE_SOURCE = "dat.conf.64";
 		$USRLOCALLIB_DIR = "/usr/local/lib64";
-		$OPTIBALIB_DIR = "/opt/opa/lib64";
+		$OPTIBALIB_DIR = "/usr/lib/opa-ff/lib64";
 		$USRLIB_DIR = "/usr/lib64";
 	}
 }
diff --git a/IbaTools/FastFabric/chassis_configure.exp b/IbaTools/FastFabric/chassis_configure.exp
index 792369b..e3e69a7 100644
--- a/IbaTools/FastFabric/chassis_configure.exp
+++ b/IbaTools/FastFabric/chassis_configure.exp
@@ -203,7 +203,7 @@ DST START/END:    [ch_get_dst $env(DST_START) $env(DST_END)]
 LINKWIDTH:        [ch_get_array_entry ch_config_linkwidths $env(LINKWIDTH_SETTING)]
 NODEDESC:         [ch_get_setname $env(SET_NAME)]
 LINKCRCMODE:	  [ch_get_array_entry ch_config_link_crc $env(LINKCRCMODE)]
-File: /opt/opa/tools/chassis_configure.exp" suite_setup noop {
+File: /usr/lib/opa-ff/tools/chassis_configure.exp" suite_setup noop {
 	global chassis
 
 	# Global Initializations for Test Suite:
diff --git a/IbaTools/FastFabric/chassis_fmconfig.exp b/IbaTools/FastFabric/chassis_fmconfig.exp
index b0613ad..4ee920f 100755
--- a/IbaTools/FastFabric/chassis_fmconfig.exp
+++ b/IbaTools/FastFabric/chassis_fmconfig.exp
@@ -90,7 +90,7 @@ test_suite "fmconfig" "update FM config" "update all chassis FM config
 FM config File: $env(CFG_FMFILE)
 Action: $env(CFG_FWACTION)
 Bootstate: $env(CFG_INSTALL_OPTIONS)
-File: /opt/opa/tools/chassis_fmconfig.exp" suite_setup noop {
+File: /usr/lib/opa-ff/tools/chassis_fmconfig.exp" suite_setup noop {
 	global env
 
 	# Global Initializations for Test Suite:
@@ -111,7 +111,7 @@ File: /opt/opa/tools/chassis_fmconfig.exp" suite_setup noop {
 
 	if { [ test_case "check" "check config file" "check config to be pushed to all chassis
 Config File: $env(CFG_FMFILE)
-File: /opt/opa/tools/chassis_fmconfig.exp" case_setup case_cleanup {
+File: /usr/lib/opa-ff/tools/chassis_fmconfig.exp" case_setup case_cleanup {
 			puts ""
 			set config_file $env(CFG_FMFILE)
 			check_esm_config "$config_file"
diff --git a/IbaTools/FastFabric/chassis_fmcontrol.exp b/IbaTools/FastFabric/chassis_fmcontrol.exp
index a603f7b..47f36de 100755
--- a/IbaTools/FastFabric/chassis_fmcontrol.exp
+++ b/IbaTools/FastFabric/chassis_fmcontrol.exp
@@ -89,7 +89,7 @@ proc case_cleanup { failed } {
 test_suite "fmcontrol" "FM control" "control FM on all chassis
 Action: $env(CFG_FWACTION)
 Bootstate: $env(CFG_INSTALL_OPTIONS)
-File: /opt/opa/tools/chassis_fmcontrol.exp" suite_setup noop {
+File: /usr/lib/opa-ff/tools/chassis_fmcontrol.exp" suite_setup noop {
 	global env
 
 	# Global Initializations for Test Suite:
diff --git a/IbaTools/FastFabric/chassis_fmgetconfig.exp b/IbaTools/FastFabric/chassis_fmgetconfig.exp
index b3582d4..60a9064 100755
--- a/IbaTools/FastFabric/chassis_fmgetconfig.exp
+++ b/IbaTools/FastFabric/chassis_fmgetconfig.exp
@@ -88,7 +88,7 @@ proc case_cleanup { failed } {
 
 test_suite "fmgetconfig" "get FM config" "get all chassis FM config file
 Destination Filename: $env(CFG_FMFILE)
-File: /opt/opa/tools/chassis_fmgetconfig.exp" suite_setup noop {
+File: /usr/lib/opa-ff/tools/chassis_fmgetconfig.exp" suite_setup noop {
 	global env
 
 	# Global Initializations for Test Suite:
diff --git a/IbaTools/FastFabric/chassis_fmgetsecurityfiles.exp b/IbaTools/FastFabric/chassis_fmgetsecurityfiles.exp
index 2630046..db61871 100755
--- a/IbaTools/FastFabric/chassis_fmgetsecurityfiles.exp
+++ b/IbaTools/FastFabric/chassis_fmgetsecurityfiles.exp
@@ -89,7 +89,7 @@ proc case_cleanup { failed } {
 
 test_suite "fmgetsecurityfiles" "get FM security files" "get chassis FM security files
 Security Files: $env(CFG_SECFILE)
-File: /opt/opa/tools/chassis_fmgetsecurityfiles.exp" suite_setup noop {
+File: /usr/lib/opa-ff/tools/chassis_fmgetsecurityfiles.exp" suite_setup noop {
 	global env
 
 	# Global Initializations for Test Suite:
diff --git a/IbaTools/FastFabric/chassis_fmsecurityfiles.exp b/IbaTools/FastFabric/chassis_fmsecurityfiles.exp
index 3bbe788..c8e74c6 100755
--- a/IbaTools/FastFabric/chassis_fmsecurityfiles.exp
+++ b/IbaTools/FastFabric/chassis_fmsecurityfiles.exp
@@ -89,7 +89,7 @@ proc case_cleanup { failed } {
 test_suite "upgrade" "upgrade FM security files" "upgrade all chassis
 Security Files: $env(CFG_SECFILES)
 Action: $env(CFG_SECACTION)
-File: /opt/opa/tools/chassis_fmsecurityfiles.exp" suite_setup noop {
+File: /usr/lib/opa-ff/tools/chassis_fmsecurityfiles.exp" suite_setup noop {
 	global env
 
 	# Global Initializations for Test Suite:
@@ -110,7 +110,7 @@ File: /opt/opa/tools/chassis_fmsecurityfiles.exp" suite_setup noop {
 
 	if { [ test_case "check" "check FM security files" "check FM security files to be pushed to all chassis
 Firmware Files: $env(CFG_SECFILES)
-File: /opt/opa/tools/chassis_fmsecurityfiles.exp" case_setup case_cleanup {
+File: /usr/lib/opa-ff/tools/chassis_fmsecurityfiles.exp" case_setup case_cleanup {
 			upvar num_secfiles num_secfiles
 			upvar sec_files sec_files
 	
diff --git a/IbaTools/FastFabric/chassis_getconfig.exp b/IbaTools/FastFabric/chassis_getconfig.exp
index c1f4bcc..a68c624 100644
--- a/IbaTools/FastFabric/chassis_getconfig.exp
+++ b/IbaTools/FastFabric/chassis_getconfig.exp
@@ -89,7 +89,7 @@ proc case_cleanup { failed } {
 }
 
 test_suite "getconfig" "getconfig" "getconfig all chassis
-File: /opt/opa/tools/chassis_getconfig.exp" suite_setup noop {
+File: /usr/lib/opa-ff/tools/chassis_getconfig.exp" suite_setup noop {
 	global chassis
 
 	# Global Initializations for Test Suite:
@@ -123,7 +123,7 @@ File: /opt/opa/tools/chassis_getconfig.exp" suite_setup noop {
 	# type of config
 	catch { close $fd }
 	catch {
-		set summary [exec cat $fname | egrep -v {^[[:space:]]*$|Node Description} | /opt/opa/tools/show_counts 2>@1 ]
+		set summary [exec cat $fname | egrep -v {^[[:space:]]*$|Node Description} | /usr/lib/opa-ff/tools/show_counts 2>@1 ]
 		show_message "Summary:\ncount - configuration\n$summary"
 	}
 	catch { exec rm -f $fname }
diff --git a/IbaTools/FastFabric/chassis_reboot.exp b/IbaTools/FastFabric/chassis_reboot.exp
index e746eb2..234a6d4 100755
--- a/IbaTools/FastFabric/chassis_reboot.exp
+++ b/IbaTools/FastFabric/chassis_reboot.exp
@@ -88,7 +88,7 @@ proc case_cleanup { failed } {
 }
 
 test_suite "reboot" "reboot" "reboot all chassis
-File: /opt/opa/tools/chassis_reboot.exp" suite_setup noop {
+File: /usr/lib/opa-ff/tools/chassis_reboot.exp" suite_setup noop {
 	global chassis
 
 	# Global Initializations for Test Suite:
diff --git a/IbaTools/FastFabric/chassis_upgrade.exp b/IbaTools/FastFabric/chassis_upgrade.exp
index 2ed1cad..3b2dc1b 100755
--- a/IbaTools/FastFabric/chassis_upgrade.exp
+++ b/IbaTools/FastFabric/chassis_upgrade.exp
@@ -89,7 +89,7 @@ proc case_cleanup { failed } {
 test_suite "upgrade" "upgrade firmware" "upgrade all chassis
 Firmware Files: $env(CFG_FWFILES)
 Action: $env(CFG_FWACTION)
-File: /opt/opa/tools/chassis_upgrade.exp" suite_setup noop {
+File: /usr/lib/opa-ff/tools/chassis_upgrade.exp" suite_setup noop {
 	global env
 
 	# Global Initializations for Test Suite:
@@ -110,7 +110,7 @@ File: /opt/opa/tools/chassis_upgrade.exp" suite_setup noop {
 
 	if { [ test_case "check" "check firmware files" "check firmware to be pushed to all chassis
 Firmware Files: $env(CFG_FWFILES)
-File: /opt/opa/tools/chassis_upgrade.exp" case_setup case_cleanup {
+File: /usr/lib/opa-ff/tools/chassis_upgrade.exp" case_setup case_cleanup {
 			upvar num_fw num_fw
 			upvar fw_files fw_files
 			upvar fw_versions fw_versions
diff --git a/IbaTools/FastFabric/configipoib.exp b/IbaTools/FastFabric/configipoib.exp
index 40c91c8..b064ffa 100755
--- a/IbaTools/FastFabric/configipoib.exp
+++ b/IbaTools/FastFabric/configipoib.exp
@@ -29,7 +29,7 @@
 
 # [ICS VERSION STRING: @(#) ./fastfabric/tools/configipoib.exp 0mwhe.20150409 [04/09/15 10:26]
 
-source "/opt/opa/tools/ff_function.exp"
+source "/usr/lib/opa-ff/tools/ff_function.exp"
 
 #=============================================================================#
 # Test Suite Description:
@@ -91,7 +91,7 @@ proc case_cleanup { failed } {
 
 test_suite "configipoib" "configure IPoIB" "Configure IPoIB based on /etc/hosts
 creates ifcfg-ib<x> file
-File: /opt/opa/tools/configipoib.exp" suite_setup noop {
+File: /usr/lib/opa-ff/tools/configipoib.exp" suite_setup noop {
 	global host
 
 	# Global Initializations for Test Suite:
@@ -129,7 +129,7 @@ File: /opt/opa/tools/configipoib.exp" suite_setup noop {
 		set ipoib_base_dev_num "[ ff_ipoib_base_dev_num $host]"
 
 		test_case "$host.config" "config ipoib on $host" "Configure $host IPoIB
-File: /opt/opa/tools/configipoib.exp" case_setup case_cleanup {
+File: /usr/lib/opa-ff/tools/configipoib.exp" case_setup case_cleanup {
 			global env
 			upvar host host
 			upvar number number
@@ -172,7 +172,7 @@ fi"
 
 			if { [ string equal "$mode" "static"] } {
 				# verify we have found an IP address for $host's $ipoib_name
-				unix_cmd 60 0 {if [ -x /opt/opa/tools/opaipcalc ]; then opaipcalc=/opt/opa/tools/opaipcalc; else opaipcalc=/sbin/opaipcalc; fi }
+				unix_cmd 60 0 {if [ -x /usr/lib/opa-ff/tools/opaipcalc ]; then opaipcalc=/opt/opa/tools/opaipcalc; else opaipcalc=/sbin/opaipcalc; fi }
 				unix_cmd 60 0 "echo \"IPADDR=\$tmp\"; \[ \"\$tmp\" != '' \]"
 				if { [ info exists env(CFG_IPOIB_NETMASK) ] && "$env(CFG_IPOIB_NETMASK)" != "" } {
 					unix_cmd 60 0 "mask='$env(CFG_IPOIB_NETMASK)'"
diff --git a/IbaTools/FastFabric/ff_funcs.sh b/IbaTools/FastFabric/ff_funcs.sh
index ca2628e..4f43285 100755
--- a/IbaTools/FastFabric/ff_funcs.sh
+++ b/IbaTools/FastFabric/ff_funcs.sh
@@ -322,9 +322,9 @@ ping_host()
 	#$1 is the destination to ping
 	#return 1 if dest doesn't respond: unknown host or unreachable
 
-	if type /opt/opa/tools/opagetipaddrtype >/dev/null 2>&1
+	if type /usr/lib/opa-ff/tools/opagetipaddrtype >/dev/null 2>&1
 	then
-		iptype=`/opt/opa/tools/opagetipaddrtype $1 2>/dev/null`
+		iptype=`/usr/lib/opa-ff/tools/opagetipaddrtype $1 2>/dev/null`
 		if [ x"$iptype" = x ]
 		then
 			iptype='ipv4'
diff --git a/IbaTools/FastFabric/ff_function.exp b/IbaTools/FastFabric/ff_function.exp
index 94e39dc..0014170 100755
--- a/IbaTools/FastFabric/ff_function.exp
+++ b/IbaTools/FastFabric/ff_function.exp
@@ -39,7 +39,7 @@ proc ff_function { func_name arg } {
 									then
 										. /etc/sysconfig/opa/opafastfabric.conf
 									fi
-									. /opt/opa/tools/opafastfabric.conf.def
+									. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 									if \[ x\"\$FF_IPOIB_SUFFIX\" = xNONE \]
 									then
 										export FF_IPOIB_SUFFIX=\"\"
diff --git a/IbaTools/FastFabric/ipoibping.exp b/IbaTools/FastFabric/ipoibping.exp
index ec1806f..d677d3c 100755
--- a/IbaTools/FastFabric/ipoibping.exp
+++ b/IbaTools/FastFabric/ipoibping.exp
@@ -29,8 +29,8 @@
 
 # [ICS VERSION STRING: unknown]
 
-source /opt/opa/tools/ibtools.exp
-source "/opt/opa/tools/ff_function.exp"
+source /usr/lib/opa-ff/tools/ibtools.exp
+source "/usr/lib/opa-ff/tools/ff_function.exp"
 
 #=============================================================================#
 # Test Suite Description:
@@ -93,7 +93,7 @@ proc case_cleanup { failed } {
 }
 
 test_suite "ipoibping" "ipoib ping" "Ping test to each host via IPoIB
-File: /opt/opa/tools/ipoibping.exp" suite_setup noop {
+File: /usr/lib/opa-ff/tools/ipoibping.exp" suite_setup noop {
 
 	# Global Initializations for Test Suite:
 	# --------------------------------------
diff --git a/IbaTools/FastFabric/load.exp b/IbaTools/FastFabric/load.exp
index 22d264c..d7d6379 100755
--- a/IbaTools/FastFabric/load.exp
+++ b/IbaTools/FastFabric/load.exp
@@ -94,7 +94,7 @@ proc case_cleanup { failed } {
 }
 
 test_suite "load" "load" "Simple installation of all hosts
-File: /opt/opa/tools/load.exp" suite_setup noop {
+File: /usr/lib/opa-ff/tools/load.exp" suite_setup noop {
 	global host
 
 	# Global Initializations for Test Suite:
@@ -117,7 +117,7 @@ File: /opt/opa/tools/load.exp" suite_setup noop {
 		test_case "$host" "load $env(CFG_RELEASE) on $host" "Installation of $env(CFG_RELEASE) $env(CFG_PRODUCT) on $host
 with options $env(CFG_INSTALL_OPTIONS)
 Removing any previous configuration
-File: /opt/opa/tools/load.exp" case_setup case_cleanup {
+File: /usr/lib/opa-ff/tools/load.exp" case_setup case_cleanup {
 			upvar host host
 
 			# build list of drivers.  If config says not to test a
diff --git a/IbaTools/FastFabric/mpiperf.exp b/IbaTools/FastFabric/mpiperf.exp
index 2138757..ce75a54 100755
--- a/IbaTools/FastFabric/mpiperf.exp
+++ b/IbaTools/FastFabric/mpiperf.exp
@@ -29,7 +29,7 @@
 
 # [ICS VERSION STRING: unknown]
 
-source "/opt/opa/tools/ff_function.exp"
+source "/usr/lib/opa-ff/tools/ff_function.exp"
 
 #=============================================================================#
 # Test Suite Description:
@@ -93,7 +93,7 @@ proc case_cleanup { failed } {
 
 test_suite "mpiperf" "mpi lat/bw" "Quick tests of mpi lat/bw between each pair
 of hosts
-File: /opt/opa/tools/mpiperf.exp" suite_setup noop {
+File: /usr/lib/opa-ff/tools/mpiperf.exp" suite_setup noop {
 	global env
 
 	# Global Initializations for Test Suite:
diff --git a/IbaTools/FastFabric/mpiperfdeviation.exp b/IbaTools/FastFabric/mpiperfdeviation.exp
index f09c161..c124e5f 100755
--- a/IbaTools/FastFabric/mpiperfdeviation.exp
+++ b/IbaTools/FastFabric/mpiperfdeviation.exp
@@ -29,7 +29,7 @@
 
 # [ICS VERSION STRING: unknown]
 
-source "/opt/opa/tools/ff_function.exp"
+source "/usr/lib/opa-ff/tools/ff_function.exp"
 
 #=============================================================================#
 # Test Suite Description:
@@ -93,7 +93,7 @@ proc case_cleanup { failed } {
 
 test_suite "mpiperfdeviation" "mpi lat/bw deviation" "Quick tests of mpi lat/bw deviation pairs
 of hosts
-File: /opt/opa/tools/mpiperfdeviation.exp" suite_setup noop {
+File: /usr/lib/opa-ff/tools/mpiperfdeviation.exp" suite_setup noop {
 	global env
 
 	# Global Initializations for Test Suite:
diff --git a/IbaTools/FastFabric/opaallanalysis.sh b/IbaTools/FastFabric/opaallanalysis.sh
index e931cab..7ce989b 100644
--- a/IbaTools/FastFabric/opaallanalysis.sh
+++ b/IbaTools/FastFabric/opaallanalysis.sh
@@ -37,9 +37,9 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-. /opt/opa/tools/ff_funcs
+. /usr/lib/opa-ff/tools/ff_funcs
 
 trap "exit 1" SIGHUP SIGTERM SIGINT
 
diff --git a/IbaTools/FastFabric/opacaptureall.sh b/IbaTools/FastFabric/opacaptureall.sh
index dd2eb0e..9c9f353 100755
--- a/IbaTools/FastFabric/opacaptureall.sh
+++ b/IbaTools/FastFabric/opacaptureall.sh
@@ -37,9 +37,9 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-. /opt/opa/tools/ff_funcs
+. /usr/lib/opa-ff/tools/ff_funcs
 
 trap "exit 1" SIGHUP SIGTERM SIGINT
 
diff --git a/IbaTools/FastFabric/opachassisanalysis.sh b/IbaTools/FastFabric/opachassisanalysis.sh
index 6b8033f..b850b96 100755
--- a/IbaTools/FastFabric/opachassisanalysis.sh
+++ b/IbaTools/FastFabric/opachassisanalysis.sh
@@ -37,9 +37,9 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-. /opt/opa/tools/ff_funcs
+. /usr/lib/opa-ff/tools/ff_funcs
 
 trap "exit 1" SIGHUP SIGTERM SIGINT
 
diff --git a/IbaTools/FastFabric/opacmdall.sh b/IbaTools/FastFabric/opacmdall.sh
index 2acab69..3f490fe 100755
--- a/IbaTools/FastFabric/opacmdall.sh
+++ b/IbaTools/FastFabric/opacmdall.sh
@@ -37,9 +37,9 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-TOOLSDIR=${TOOLSDIR:-/opt/opa/tools}
+TOOLSDIR=${TOOLSDIR:-/usr/lib/opa-ff/tools}
 BINDIR=${BINDIR:-/usr/sbin}
 
 . $TOOLSDIR/ff_funcs
diff --git a/IbaTools/FastFabric/opadownloadall.sh b/IbaTools/FastFabric/opadownloadall.sh
index 167d547..0e01633 100755
--- a/IbaTools/FastFabric/opadownloadall.sh
+++ b/IbaTools/FastFabric/opadownloadall.sh
@@ -36,9 +36,9 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-. /opt/opa/tools/ff_funcs
+. /usr/lib/opa-ff/tools/ff_funcs
 
 trap "exit 1" SIGHUP SIGTERM SIGINT
 
diff --git a/IbaTools/FastFabric/opaesmanalysis.sh b/IbaTools/FastFabric/opaesmanalysis.sh
index 3c36c39..be508bb 100755
--- a/IbaTools/FastFabric/opaesmanalysis.sh
+++ b/IbaTools/FastFabric/opaesmanalysis.sh
@@ -37,9 +37,9 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-. /opt/opa/tools/ff_funcs
+. /usr/lib/opa-ff/tools/ff_funcs
 
 trap "exit 1" SIGHUP SIGTERM SIGINT
 
diff --git a/IbaTools/FastFabric/opaexpandfile.sh b/IbaTools/FastFabric/opaexpandfile.sh
index 2a2e785..d8e9de7 100755
--- a/IbaTools/FastFabric/opaexpandfile.sh
+++ b/IbaTools/FastFabric/opaexpandfile.sh
@@ -39,9 +39,9 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-. /opt/opa/tools/ff_funcs
+. /usr/lib/opa-ff/tools/ff_funcs
 
 trap "exit 1" SIGHUP SIGTERM SIGINT
 
diff --git a/IbaTools/FastFabric/opafabricanalysis.sh b/IbaTools/FastFabric/opafabricanalysis.sh
index 693d12f..72d7534 100755
--- a/IbaTools/FastFabric/opafabricanalysis.sh
+++ b/IbaTools/FastFabric/opafabricanalysis.sh
@@ -37,9 +37,9 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-. /opt/opa/tools/ff_funcs
+. /usr/lib/opa-ff/tools/ff_funcs
 
 trap "exit 1" SIGHUP SIGTERM SIGINT
 
diff --git a/IbaTools/FastFabric/opafastfabric.conf.LINUX.OPENIB b/IbaTools/FastFabric/opafastfabric.conf.LINUX.OPENIB
index 5cfbd77..cab50b3 100755
--- a/IbaTools/FastFabric/opafastfabric.conf.LINUX.OPENIB
+++ b/IbaTools/FastFabric/opafastfabric.conf.LINUX.OPENIB
@@ -110,7 +110,7 @@ export FF_TIMEOUT_MULT=${FF_TIMEOUT_MULT:-2}
 export FF_RESULT_DIR=${FF_RESULT_DIR:-$HOME}
 
 # IntelOPA product to install during opahostadmin load and upgrade
-export FF_PRODUCT=${FF_PRODUCT:-IntelOPA-Basic.`cat /opt/opa/tools/osid_wrapper`}
+export FF_PRODUCT=${FF_PRODUCT:-IntelOPA-Basic.`cat /usr/lib/opa-ff/tools/osid_wrapper`}
 
 # IntelOPA product version to install during opahostadmin load and upgrade
 export FF_PRODUCT_VERSION=${FF_PRODUCT_VERSION:-`cat /etc/sysconfig/opa/version_wrapper 2>/dev/null`}
@@ -220,10 +220,10 @@ export FF_DIFF_CMD=${FF_DIFF_CMD:-diff -C 1}
 # location to find fastfabric mpi_apps for use by assorted fastfabric tools
 # As needed they can be copied to a global filesystem and adjust this variable
 # This MUST be a absolute path which exists on all nodes
-export FF_MPI_APPS_DIR=${FF_MPI_APPS_DIR:-/opt/opa/src/mpi_apps}
+export FF_MPI_APPS_DIR=${FF_MPI_APPS_DIR:-/usr/lib/opa-ff/src/mpi_apps}
 
 # env variables to set within each rank of MPI runs done by fastfabric directly
-# alternatively the /opt/opa/src/mpi_apps/ofed.*.param files can be edited
+# alternatively the /usr/lib/opa-ff/src/mpi_apps/ofed.*.param files can be edited
 # with appropriate values.
 # example of PSM selection of vFabric by PKEY/SL
 #export FF_MPI_ENV=${FF_MPI_ENV:-PSM_PKEY=0xffff IPATH_SL=0 PSM_MTU=2048}
@@ -234,7 +234,7 @@ export FF_MPI_APPS_DIR=${FF_MPI_APPS_DIR:-/opt/opa/src/mpi_apps}
 export FF_MPI_ENV=${FF_MPI_ENV:-}
 
 # configuration of arguments for MPI performance deviation testing
-# via /opt/opa/src/mpi_apps/deviation/deviation
+# via /usr/lib/opa-ff/src/mpi_apps/deviation/deviation
 # The defaults should work for most fabrics.  This can be made stricter
 # and/or specific to the fabric by using arguments such as -h hostname
 # -bwthres and -latthres.  See run_deviation or the user's guide for more
@@ -246,7 +246,7 @@ export FF_DEVIATION_ARGS=${FF_DEVIATION_ARGS:--bwtol 20 -lattol 50 -c}
 # location to find fastfabric shmem_apps for use by assorted fastfabric tools
 # As needed they can be copied to a global filesystem and adjust this variable
 # This MUST be a absolute path which exists on all nodes
-export FF_SHMEM_APPS_DIR=${FF_SHMEM_APPS_DIR:-/opt/opa/src/shmem_apps}
+export FF_SHMEM_APPS_DIR=${FF_SHMEM_APPS_DIR:-/usr/lib/opa-ff/src/shmem_apps}
 
 #Serialize output of operations running in parallel
 export FF_SERIALIZE_OUTPUT=${FF_SERIALIZE_OUTPUT:-yes}
diff --git a/IbaTools/FastFabric/opafastfabric.pl b/IbaTools/FastFabric/opafastfabric.pl
index 1188a12..8c02f2f 100755
--- a/IbaTools/FastFabric/opafastfabric.pl
+++ b/IbaTools/FastFabric/opafastfabric.pl
@@ -59,7 +59,7 @@ $BRAND =~ s/%.*//;
 # this is patched by Makefile to be IBACCESS or OPENIB
 my $IB_STACK_TYPE="THIS_IS_THE_IB_STACK_TYPE";
 # runtime alternative to get_local_stack_type IBACCESS or OPENIB
-#my $IB_STACK_TYPE=`/opt/opa/tools/tcl_proc get_local_stack_type 2>/dev/null`;
+#my $IB_STACK_TYPE=`/usr/lib/opa-ff/tools/tcl_proc get_local_stack_type 2>/dev/null`;
 #chomp($LocalStackType);
 #if ( "$LocalStackType" eq "" ) {
 #	die "Unable to determine which IB stack type is installed";
@@ -82,12 +82,12 @@ $SYS_CONFIG_DIR="/etc/sysconfig";
 $OPA_CONFIG_DIR = "$SYS_CONFIG_DIR/opa";
 $LIB_DIR = "/lib";
 $USRLOCALLIB_DIR = "/usr/local/lib";
-$OPTIBALIB_DIR = "/opt/opa/lib";
+$OPTIBALIB_DIR = "/usr/lib/opa-ff/lib";
 if ( "$BIN_DIR" eq "" ) {
 	$BIN_DIR = "/usr/sbin";
 }
 if ( "$TOOLS_DIR" eq "" ) {
-	$TOOLS_DIR = "/opt/opa/tools";
+	$TOOLS_DIR = "/usr/lib/opa-ff/tools";
 }
 $FF_CONF_FILE = "$OPA_CONFIG_DIR/opafastfabric.conf";
 $OWNER = "root";
@@ -326,7 +326,7 @@ sub set_libdir
 	{
 		$LIB_DIR = "/lib64";
 		$USRLOCALLIB_DIR = "/usr/local/lib64";
-		$OPTIBALIB_DIR = "/opt/opa/lib64";
+		$OPTIBALIB_DIR = "/usr/lib/opa-ff/lib64";
 	}
 }
 
@@ -730,11 +730,11 @@ sub installed_shmem
 sub installed_mpisrc
 {
 	#return (-e "$ROOT/usr/local/src/InfiniServMPI/.mpisrc" ||
-	#	-e "$ROOT/opt/opa/src/InfiniServMPI/.mpisrc");
+	#	-e "$ROOT/usr/lib/opa-ff/src/InfiniServMPI/.mpisrc");
 	if ( "$IB_STACK_TYPE" eq "IBACCESS" ) {
-		return (-e "$ROOT/opt/opa/src/InfiniServMPI/mpich/do_build");
+		return (-e "$ROOT/usr/lib/opa-ff/src/InfiniServMPI/mpich/do_build");
 	} else {
-		return (-e "$ROOT/opt/opa/src/MPI/do_build");
+		return (-e "$ROOT/usr/lib/opa-ff/src/MPI/do_build");
 	}
 }
 
@@ -829,7 +829,7 @@ sub setup_ffports
 	do {
 		if ( ! -e "$file" ) {
 			# replace missing file
-			copy_data_file("/opt/opa/tools/ports", "$file");
+			copy_data_file("/usr/lib/opa-ff/tools/ports", "$file");
 		}
 		print "You will now have a chance to edit/review the FastFabric PORTS_FILE:\n";
 		print "$file\n";
@@ -1366,7 +1366,7 @@ sub fabricsetup_rebuildmpi
 		return;
 	}
 	if ( "$IB_STACK_TYPE" eq "IBACCESS" ) {
-		if (run_fabric_cmd("cd $ROOT/opt/opa/src/InfiniServMPI/mpich; ./do_build")) {
+		if (run_fabric_cmd("cd $ROOT/usr/lib/opa-ff/src/InfiniServMPI/mpich; ./do_build")) {
 			return 1;
 		}
 		if (! valid_config_file("Host File", $FabricSetupHostsFile) ) {
@@ -1376,7 +1376,7 @@ sub fabricsetup_rebuildmpi
 		# do in two steps so user can see results of build before scp starts
 		return run_fabric_cmd("$BIN_DIR/opascpall -r -p -f $FabricSetupHostsFile $USRLOCALLIB_DIR/libtvmpich* $USRLOCALLIB_DIR/shared $USRLOCALLIB_DIR");
 	} else {	# OFED
-		if (run_fabric_cmd("cd $ROOT/opt/opa/src/MPI; ./do_build")) {
+		if (run_fabric_cmd("cd $ROOT/usr/lib/opa-ff/src/MPI; ./do_build")) {
 			return 1;
 		}
 		if (! valid_config_file("Host File", $FabricSetupHostsFile) ) {
@@ -1384,11 +1384,11 @@ sub fabricsetup_rebuildmpi
 		}
 		# do in two steps so user can see results of build before scp starts
 		# determine where MPI was built and copy needed files to all nodes
-		my $mpich_prefix= read_simple_config_param("$ROOT/opt/opa/src/MPI/.mpiinfo", "MPICH_PREFIX");
+		my $mpich_prefix= read_simple_config_param("$ROOT/usr/lib/opa-ff/src/MPI/.mpiinfo", "MPICH_PREFIX");
 		# instead of copy, copy the actual rpms and install them
 		#return run_fabric_cmd("$BIN_DIR/opascpall -t -p -f $FabricSetupHostsFile $mpich_prefix $mpich_prefix");
-		my $mpi_rpms= read_simple_config_param("$ROOT/opt/opa/src/MPI/.mpiinfo", "MPI_RPMS");
-		if (run_fabric_cmd("cd /opt/opa/src/MPI && $BIN_DIR/opascpall -p -f $FabricSetupHostsFile $mpi_rpms /var/tmp")) {
+		my $mpi_rpms= read_simple_config_param("$ROOT/usr/lib/opa-ff/src/MPI/.mpiinfo", "MPI_RPMS");
+		if (run_fabric_cmd("cd /usr/lib/opa-ff/src/MPI && $BIN_DIR/opascpall -p -f $FabricSetupHostsFile $mpi_rpms /var/tmp")) {
 			return 1;
 		}
 		# need force for reinstall case
@@ -1613,7 +1613,7 @@ sub fabricadmin_singlehost
 	my $verifyhosts_opts="-c"; # Always copy the hostverify.sh file.
 	my $verifyhosts_tests="";
 	my $result_dir = read_ffconfig_param("FF_RESULT_DIR");
-	my $hostverify_sample = "/opt/opa/samples/hostverify.sh";
+	my $hostverify_sample = "/usr/lib/opa-ff/samples/hostverify.sh";
 	my $hostverify = read_ffconfig_param("FF_HOSTVERIFY_DIR") . "/hostverify.sh";
 	my $hostverify_res = "hostverify.res";
 	my $inp;
@@ -2499,8 +2499,8 @@ sub chassis_fmconfig
 	if (! valid_config_file("Chassis File", $FabricChassisFile) ) {
 		return 1;
 	}
-	if ( -e "/opt/opa/fm_tools" ) {
-		$tooldir="/opt/opa/fm_tools";
+	if ( -e "/usr/lib/opa-ff/fm_tools" ) {
+		$tooldir="/usr/lib/opa-ff/fm_tools";
 	} else {
 		my $IFS_FM_BASE= read_simple_config_param("$ROOT/etc/sysconfig/opa/opafm.info", "IFS_FM_BASE");
 		$tooldir="$IFS_FM_BASE/etc";
diff --git a/IbaTools/FastFabric/opahostsmanalysis.sh b/IbaTools/FastFabric/opahostsmanalysis.sh
index c7f6f07..7ab7dae 100755
--- a/IbaTools/FastFabric/opahostsmanalysis.sh
+++ b/IbaTools/FastFabric/opahostsmanalysis.sh
@@ -37,9 +37,9 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-. /opt/opa/tools/ff_funcs
+. /usr/lib/opa-ff/tools/ff_funcs
 
 trap "exit 1" SIGHUP SIGTERM SIGINT
 
diff --git a/IbaTools/FastFabric/opapingall.sh b/IbaTools/FastFabric/opapingall.sh
index d42fc89..b912654 100755
--- a/IbaTools/FastFabric/opapingall.sh
+++ b/IbaTools/FastFabric/opapingall.sh
@@ -36,9 +36,9 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-. /opt/opa/tools/ff_funcs
+. /usr/lib/opa-ff/tools/ff_funcs
 
 trap "exit 1" SIGHUP SIGTERM SIGINT
 
diff --git a/IbaTools/FastFabric/opascpall.sh b/IbaTools/FastFabric/opascpall.sh
index 7cd9c4d..913d798 100755
--- a/IbaTools/FastFabric/opascpall.sh
+++ b/IbaTools/FastFabric/opascpall.sh
@@ -37,9 +37,9 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-. /opt/opa/tools/ff_funcs
+. /usr/lib/opa-ff/tools/ff_funcs
 
 temp="$(mktemp --tmpdir "opascpall.XXXXXX")"
 trap "rm -f $temp; exit 1" SIGHUP SIGTERM SIGINT
@@ -73,7 +73,7 @@ Usage_full()
 	echo "   FF_MAX_PARALLEL - when -p option is used, maximum concurrent operations" >&2
 	echo "example:">&2
 	echo "   opascpall MPI-PMB /root/MPI-PMB" >&2
-	echo "   opascpall -t -p /opt/opa/src/mpi_apps /opt/opa/src/mpi_apps" >&2
+	echo "   opascpall -t -p /usr/lib/opa-ff/src/mpi_apps /opt/opa/src/mpi_apps" >&2
 	echo "   opascpall a b c /root/tools/" >&2
 	echo "   opascpall -h 'arwen elrond' a b c /root/tools" >&2
 	echo "   HOSTS='arwen elrond' opascpall a b c /root/tools" >&2
@@ -102,7 +102,7 @@ Usage()
 	echo "   dest_dir - destination for copy.  If omitted current directory name is used" >&2
 	echo "example:">&2
 	echo "   opascpall MPI-PMB /root/MPI-PMB" >&2
-	echo "   opascpall -t -p /opt/opa/src/mpi_apps /opt/opa/src/mpi_apps" >&2
+	echo "   opascpall -t -p /usr/lib/opa-ff/src/mpi_apps /opt/opa/src/mpi_apps" >&2
 	echo "   opascpall a b c /root/tools/" >&2
 	echo "user@ syntax cannot be used in filenames specified" >&2
 	echo "To copy from hosts in the cluster to this host, use opauploadall" >&2
diff --git a/IbaTools/FastFabric/opasetupssh.sh b/IbaTools/FastFabric/opasetupssh.sh
index a8e8b2a..04f1d4d 100755
--- a/IbaTools/FastFabric/opasetupssh.sh
+++ b/IbaTools/FastFabric/opasetupssh.sh
@@ -37,9 +37,9 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-. /opt/opa/tools/ff_funcs
+. /usr/lib/opa-ff/tools/ff_funcs
 
 trap "exit 1" SIGHUP SIGTERM SIGINT
 
@@ -432,7 +432,7 @@ process_host()
 
 	thost=`ff_host_basename $hostname`
 	thost_ib=`ff_host_basename_to_ipoib $thost`
-	#setup_self_ssh='[ -x /opt/opa/tools/setup_self_ssh ] && /opt/opa/tools/setup_self_ssh'
+	#setup_self_ssh='[ -x /usr/lib/opa-ff/tools/setup_self_ssh ] && /opt/opa/tools/setup_self_ssh'
 	setup_self_ssh='/tmp/setup_self_ssh'
 	if [ "$thost" != "$thost_ib" ]
 	then
@@ -488,7 +488,7 @@ process_host()
 			fi
 			if [ "$Ropt" = "n" ]
 			then
-				run_host_cmd $copycmd /opt/opa/tools/setup_self_ssh $user@$bracket$thost$close_bracket:/tmp/setup_self_ssh
+				run_host_cmd $copycmd /usr/lib/opa-ff/tools/setup_self_ssh $user@$bracket$thost$close_bracket:/tmp/setup_self_ssh
 				run_host_cmd $shellcmd -l $user $thost "$setup_self_ssh"
 				run_host_cmd $shellcmd -l $user $thost "rm -f /tmp/setup_self_ssh"
 			fi
@@ -502,7 +502,7 @@ process_host()
 			fi
 			if [ "$Ropt" = "n" ]
 			then
-				run_host_cmd $copycmd /opt/opa/tools/setup_self_ssh $user@$bracket$thost$close_bracket:/tmp/setup_self_ssh
+				run_host_cmd $copycmd /usr/lib/opa-ff/tools/setup_self_ssh $user@$bracket$thost$close_bracket:/tmp/setup_self_ssh
 				run_host_cmd $shellcmd -l $user $thost "$setup_self_ssh -U"
 				run_host_cmd $shellcmd -l $user $thost "rm -f /tmp/setup_self_ssh"
 			fi
@@ -564,14 +564,14 @@ process_chassis()
 				continue
 			fi
 			rm -f $tempfile $tempfile.2 2>/dev/null
-			/opt/opa/tools/tcl_proc chassis_sftp_cmd "sftp $user@\[${tchassis}\]" "get /firmware/$user/authorized_keys $tempfile" 2>&1| grep -q 'FAILED'
+			/usr/lib/opa-ff/tools/tcl_proc chassis_sftp_cmd "sftp $user@\[${tchassis}\]" "get /firmware/$user/authorized_keys $tempfile" 2>&1| grep -q 'FAILED'
 			if [ $? -eq 0 ] || [ ! -f $tempfile ]
 			then
 				echo "Unable to configure $tchassis for password-less ssh, skipping..."
 				continue
 			fi
 			cat ~/.ssh/id_rsa.pub $tempfile | sort -u > $tempfile.2
-			/opt/opa/tools/tcl_proc chassis_sftp_cmd "sftp $user@\[${tchassis}\]" "put $tempfile.2 /firmware/$user/authorized_keys" 2>&1| grep -q 'FAILED'
+			/usr/lib/opa-ff/tools/tcl_proc chassis_sftp_cmd "sftp $user@\[${tchassis}\]" "put $tempfile.2 /firmware/$user/authorized_keys" 2>&1| grep -q 'FAILED'
 			if [ $? -eq 0 ]
 			then
 				echo "$tchassis password-less ssh config failed, skipping..."
@@ -660,7 +660,7 @@ then
 		fi
 	done
 else
-	chassis_cmd='/opt/opa/tools/tcl_proc chassis_run_cmd'
+	chassis_cmd='/usr/lib/opa-ff/tools/tcl_proc chassis_run_cmd'
 	for chassisname in $CHASSIS
 	do
 		if [ "$popt" = y ]
diff --git a/IbaTools/FastFabric/opashowallports.sh b/IbaTools/FastFabric/opashowallports.sh
index cb07f00..135c75f 100755
--- a/IbaTools/FastFabric/opashowallports.sh
+++ b/IbaTools/FastFabric/opashowallports.sh
@@ -36,9 +36,9 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-. /opt/opa/tools/ff_funcs
+. /usr/lib/opa-ff/tools/ff_funcs
 
 trap "exit 1" SIGHUP SIGTERM SIGINT
 
@@ -145,7 +145,7 @@ then
 	do
 		echo "--------------------------------------------------------------------"
 		echo "$hostname:"
-		/opt/opa/tools/tcl_proc hosts_run_cmd "$hostname" "root" '/usr/sbin/opainfo' 1
+		/usr/lib/opa-ff/tools/tcl_proc hosts_run_cmd "$hostname" "root" '/usr/sbin/opainfo' 1
 	done
 else
 
@@ -167,6 +167,6 @@ else
 		chassis=`strip_chassis_slots "$chassis"`
 		echo "--------------------------------------------------------------------"
 		echo "$chassis:"
-		/opt/opa/tools/tcl_proc chassises_run_cmd "$chassis" "admin" 'ismPortStats -noprompt' 1 2>&1|egrep 'FAIL|Port State|Link Qual|Link Width|Link Speed|^[[:space:]]|^Name' | egrep -v 'Tx|Rx'
+		/usr/lib/opa-ff/tools/tcl_proc chassises_run_cmd "$chassis" "admin" 'ismPortStats -noprompt' 1 2>&1|egrep 'FAIL|Port State|Link Qual|Link Width|Link Speed|^[[:space:]]|^Name' | egrep -v 'Tx|Rx'
 	done
 fi
diff --git a/IbaTools/FastFabric/opaswdisableall.sh b/IbaTools/FastFabric/opaswdisableall.sh
index 78373ae..ef89498 100755
--- a/IbaTools/FastFabric/opaswdisableall.sh
+++ b/IbaTools/FastFabric/opaswdisableall.sh
@@ -39,11 +39,11 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-if [ -f /opt/opa/tools/ff_funcs ]
+if [ -f /usr/lib/opa-ff/tools/ff_funcs ]
 then
-	. /opt/opa/tools/ff_funcs
+	. /usr/lib/opa-ff/tools/ff_funcs
 fi
 
 trap "exit 1" SIGHUP SIGTERM SIGINT
diff --git a/IbaTools/FastFabric/opatest.sh b/IbaTools/FastFabric/opatest.sh
index 5f6d3bc..c924758 100755
--- a/IbaTools/FastFabric/opatest.sh
+++ b/IbaTools/FastFabric/opatest.sh
@@ -37,9 +37,9 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-. /opt/opa/tools/ff_funcs
+. /usr/lib/opa-ff/tools/ff_funcs
 
 if [ x"$FF_IPOIB_SUFFIX" = xNONE ]
 then
@@ -466,7 +466,7 @@ export TEST_TIMEOUT_MULT="$FF_TIMEOUT_MULT"
 export TEST_RESULT_DIR="$FF_RESULT_DIR"
 export TEST_MAX_PARALLEL="$FF_MAX_PARALLEL"
 export TEST_CONFIG_FILE="/dev/null"
-export TL_DIR=/opt/opa/tools
+export TL_DIR=/usr/lib/opa-ff/tools
 export TEST_IDENTIFY=no
 export TEST_SHOW_CONFIG=no
 export TEST_SHOW_START=yes
@@ -675,7 +675,7 @@ then
 			trap "rm -rf $CFG_CFGTEMPDIR; exit 1" 1 2 3 9 15
 			trap "rm -rf $CFG_CFGTEMPDIR" EXIT
 
-			/opt/opa/tools/chassis_setup $CFG_CFGTEMPDIR $CFG_CHASSIS
+			/usr/lib/opa-ff/tools/chassis_setup $CFG_CFGTEMPDIR $CFG_CHASSIS
 			if [ $? = 0 ]
 			then
 				export SYSLOG_SERVER=`grep "Syslog Server IP_Address" $CFG_CFGTEMPDIR/.chassisSetup.out | cut -d : -f 2`
@@ -831,7 +831,7 @@ then
 			# Update traps to delete all temporary directories.
 			trap "rm -rf $CFG_CFGTEMPDIR; exit 1" 1 2 3 9 15
 			trap "rm -rf $CFG_CFGTEMPDIR" EXIT
-			/opt/opa/tools/switch_setup $CFG_CFGTEMPDIR
+			/usr/lib/opa-ff/tools/switch_setup $CFG_CFGTEMPDIR
 			if [ $? = 0 ]
 			then
 				export LINKWIDTH_SETTING=`grep "Link Width Selection" $CFG_CFGTEMPDIR/.switchSetup.out | cut -d : -f 2`
diff --git a/IbaTools/FastFabric/opauploadall.sh b/IbaTools/FastFabric/opauploadall.sh
index 51c599a..5381b8f 100755
--- a/IbaTools/FastFabric/opauploadall.sh
+++ b/IbaTools/FastFabric/opauploadall.sh
@@ -36,9 +36,9 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-. /opt/opa/tools/ff_funcs
+. /usr/lib/opa-ff/tools/ff_funcs
 
 trap "exit 1" SIGHUP SIGTERM SIGINT
 
diff --git a/IbaTools/FastFabric/reboot.exp b/IbaTools/FastFabric/reboot.exp
index 497e5fd..c1c81a3 100755
--- a/IbaTools/FastFabric/reboot.exp
+++ b/IbaTools/FastFabric/reboot.exp
@@ -29,7 +29,7 @@
 
 # [ICS VERSION STRING: unknown]
 
-source /opt/opa/tools/ibtools.exp
+source /usr/lib/opa-ff/tools/ibtools.exp
 
 #=============================================================================#
 # Test Suite Description:
@@ -90,7 +90,7 @@ proc case_cleanup { failed } {
 }
 
 test_suite "reboot" "reboot" "reboot all hosts
-File: /opt/opa/tools/reboot.exp" suite_setup noop {
+File: /usr/lib/opa-ff/tools/reboot.exp" suite_setup noop {
 	global host
 
 	# Global Initializations for Test Suite:
diff --git a/IbaTools/FastFabric/sacache.exp b/IbaTools/FastFabric/sacache.exp
index 93f1a35..6ad6946 100755
--- a/IbaTools/FastFabric/sacache.exp
+++ b/IbaTools/FastFabric/sacache.exp
@@ -29,8 +29,8 @@
 
 # [ICS VERSION STRING: unknown]
 
-source /opt/opa/tools/ibtools.exp
-source "/opt/opa/tools/ff_function.exp"
+source /usr/lib/opa-ff/tools/ibtools.exp
+source "/usr/lib/opa-ff/tools/ff_function.exp"
 
 #=============================================================================#
 # Test Suite Description:
@@ -88,7 +88,7 @@ proc case_cleanup { failed } {
 }
 
 test_suite "sacache" "sacache" "confirm sacache has paths to all hosts
-File: /opt/opa/tools/sacache.exp" suite_setup noop {
+File: /usr/lib/opa-ff/tools/sacache.exp" suite_setup noop {
 
 	# Global Initializations for Test Suite:
 	# --------------------------------------
diff --git a/IbaTools/FastFabric/switch_capture.exp b/IbaTools/FastFabric/switch_capture.exp
index dad55dd..f24f23b 100755
--- a/IbaTools/FastFabric/switch_capture.exp
+++ b/IbaTools/FastFabric/switch_capture.exp
@@ -88,7 +88,7 @@ proc case_cleanup { failed } {
 }
 
 test_suite "switchcapture" "capture switch state" "capture switch firmware and hardware state of all externally managed switch nodes
-File: /opt/opa/tools/switch_capture.exp" suite_setup noop {
+File: /usr/lib/opa-ff/tools/switch_capture.exp" suite_setup noop {
 	global opaswitch
 
 	# Global Initializations for Test Suite:
diff --git a/IbaTools/FastFabric/switch_configure.exp b/IbaTools/FastFabric/switch_configure.exp
index c514da7..4e21ffa 100644
--- a/IbaTools/FastFabric/switch_configure.exp
+++ b/IbaTools/FastFabric/switch_configure.exp
@@ -149,7 +149,7 @@ NODEDESC:  [sw_get_array_entry sw_config_nodedesc $env(NODEDESC_SETTING)]
 FMENABLED: [sw_get_array_entry sw_config_fmenabled $env(FMENABLED_SETTING)]
 LINKCRCMODE:	[sw_get_array_entry sw_config_linkcrcmode $env(LINKCRCMODE_SETTING)]
 
-File: /opt/opa/tools/switch_configure.exp" suite_setup noop {
+File: /usr/lib/opa-ff/tools/switch_configure.exp" suite_setup noop {
 	global opaswitch
 
 	# Global Initializations for Test Suite:
diff --git a/IbaTools/FastFabric/switch_dump.exp b/IbaTools/FastFabric/switch_dump.exp
index d62e1df..063bec2 100755
--- a/IbaTools/FastFabric/switch_dump.exp
+++ b/IbaTools/FastFabric/switch_dump.exp
@@ -88,7 +88,7 @@ proc case_cleanup { failed } {
 }
 
 test_suite "dump" "dump firmware" "dump firmware of all externally managed switch nodes
-File: /opt/opa/tools/switch_dump.exp" suite_setup noop {
+File: /usr/lib/opa-ff/tools/switch_dump.exp" suite_setup noop {
 	global opaswitch
 
 	# Global Initializations for Test Suite:
diff --git a/IbaTools/FastFabric/switch_fwverify.exp b/IbaTools/FastFabric/switch_fwverify.exp
index 6cec599..f1eae5e 100755
--- a/IbaTools/FastFabric/switch_fwverify.exp
+++ b/IbaTools/FastFabric/switch_fwverify.exp
@@ -89,7 +89,7 @@ proc case_cleanup { failed } {
 }
 
 test_suite "switchfwverify" "report switch fwverify" "report firmware version and capability of all externally managed switch nodes
-File: /opt/opa/tools/switch_fwverify.exp" suite_setup noop {
+File: /usr/lib/opa-ff/tools/switch_fwverify.exp" suite_setup noop {
 	global opaswitch
 
 	# Global Initializations for Test Suite:
diff --git a/IbaTools/FastFabric/switch_getconfig.exp b/IbaTools/FastFabric/switch_getconfig.exp
index c357f1d..b313eb5 100755
--- a/IbaTools/FastFabric/switch_getconfig.exp
+++ b/IbaTools/FastFabric/switch_getconfig.exp
@@ -89,7 +89,7 @@ proc case_cleanup { failed } {
 }
 
 test_suite "switchgetportconfig" "report switch getconfig" "report port configurations of all externally managed switch nodes
-File: /opt/opa/tools/switch_getconfig.exp" suite_setup noop {
+File: /usr/lib/opa-ff/tools/switch_getconfig.exp" suite_setup noop {
 	global opaswitch
 
 	# Global Initializations for Test Suite:
@@ -123,7 +123,7 @@ File: /opt/opa/tools/switch_getconfig.exp" suite_setup noop {
 	# type of config
 	catch { close $fd }
 	catch {
-		set summary [exec cat $fname | egrep -v {^[[:space:]]*$|Node Description} | /opt/opa/tools/show_counts 2>@1 ]
+		set summary [exec cat $fname | egrep -v {^[[:space:]]*$|Node Description} | /usr/lib/opa-ff/tools/show_counts 2>@1 ]
 		show_message "Summary:\ncount - configuration\n$summary"
 	}
 	catch { exec rm -f $fname }
diff --git a/IbaTools/FastFabric/switch_hwvpd.exp b/IbaTools/FastFabric/switch_hwvpd.exp
index 354308f..6570226 100755
--- a/IbaTools/FastFabric/switch_hwvpd.exp
+++ b/IbaTools/FastFabric/switch_hwvpd.exp
@@ -89,7 +89,7 @@ proc case_cleanup { failed } {
 }
 
 test_suite "switchhwvpd" "report switch hwvpd" "report firmware version and capability of all externally managed switch nodes
-File: /opt/opa/tools/switch_hwvpd.exp" suite_setup noop {
+File: /usr/lib/opa-ff/tools/switch_hwvpd.exp" suite_setup noop {
 	global opaswitch
 
 	# Global Initializations for Test Suite:
diff --git a/IbaTools/FastFabric/switch_info.exp b/IbaTools/FastFabric/switch_info.exp
index f339521..abfe292 100755
--- a/IbaTools/FastFabric/switch_info.exp
+++ b/IbaTools/FastFabric/switch_info.exp
@@ -89,7 +89,7 @@ proc case_cleanup { failed } {
 }
 
 test_suite "switchinfo" "report switch info" "report firmware version and capability of all externally managed switch nodes
-File: /opt/opa/tools/switch_info.exp" suite_setup noop {
+File: /usr/lib/opa-ff/tools/switch_info.exp" suite_setup noop {
 	global opaswitch
 
 	# Global Initializations for Test Suite:
@@ -123,7 +123,7 @@ File: /opt/opa/tools/switch_info.exp" suite_setup noop {
 	# type of config
 	catch { close $fd }
 	catch {
-		set summary [exec cat $fname | egrep -v {^[[:space:]]*$} | /opt/opa/tools/show_counts 2>@1 ]
+		set summary [exec cat $fname | egrep -v {^[[:space:]]*$} | /usr/lib/opa-ff/tools/show_counts 2>@1 ]
 		show_message "Summary:\ncount - info\n$summary"
 	}
 	catch { exec rm -f $fname }
diff --git a/IbaTools/FastFabric/switch_ping.exp b/IbaTools/FastFabric/switch_ping.exp
index 3c812e6..2295eed 100755
--- a/IbaTools/FastFabric/switch_ping.exp
+++ b/IbaTools/FastFabric/switch_ping.exp
@@ -89,7 +89,7 @@ proc case_cleanup { failed } {
 }
 
 test_suite "switchping" "report switch ping" "report firmware version and capability of all externally managed switch nodes
-File: /opt/opa/tools/switch_ping.exp" suite_setup noop {
+File: /usr/lib/opa-ff/tools/switch_ping.exp" suite_setup noop {
 	global opaswitch
 
 	# Global Initializations for Test Suite:
diff --git a/IbaTools/FastFabric/switch_reboot.exp b/IbaTools/FastFabric/switch_reboot.exp
index be07360..68cd0be 100755
--- a/IbaTools/FastFabric/switch_reboot.exp
+++ b/IbaTools/FastFabric/switch_reboot.exp
@@ -88,7 +88,7 @@ proc case_cleanup { failed } {
 }
 
 test_suite "reboot" "reboot" "reboot all externally managed switch nodes
-File: /opt/opa/tools/switch_reboot.exp" suite_setup noop {
+File: /usr/lib/opa-ff/tools/switch_reboot.exp" suite_setup noop {
 	global opaswitch
 
 	# Global Initializations for Test Suite:
diff --git a/IbaTools/FastFabric/switch_upgrade.exp b/IbaTools/FastFabric/switch_upgrade.exp
index 1355251..6c010bb 100755
--- a/IbaTools/FastFabric/switch_upgrade.exp
+++ b/IbaTools/FastFabric/switch_upgrade.exp
@@ -91,7 +91,7 @@ test_suite "upgrade" "upgrade firmware" "upgrade all externally managed switch n
 Firmware package File: $env(CFG_FWFILE)
 Firmware Files: $env(CFG_FWBINFILES)
 Action: $env(CFG_FWACTION)
-File: /opt/opa/tools/switch_upgrade.exp" suite_setup noop {
+File: /usr/lib/opa-ff/tools/switch_upgrade.exp" suite_setup noop {
 	global env
 	global opaswitch
 
@@ -115,7 +115,7 @@ File: /opt/opa/tools/switch_upgrade.exp" suite_setup noop {
 Firmware package File: $env(CFG_FWFILE)
 Firmware Files: $env(CFG_FWBINFILES)
 Firmware Release Info: $env(CFG_FWRELINFO)
-File: /opt/opa/tools/switch_upgrade.exp" case_setup case_cleanup {	
+File: /usr/lib/opa-ff/tools/switch_upgrade.exp" case_setup case_cleanup {	
 			set fw_version ""
 			set fw_type ""
 			set fw_speed ""
diff --git a/IbaTools/FastFabric/tcl_proc.sh b/IbaTools/FastFabric/tcl_proc.sh
index b2caa5f..ade6ecc 100644
--- a/IbaTools/FastFabric/tcl_proc.sh
+++ b/IbaTools/FastFabric/tcl_proc.sh
@@ -35,7 +35,7 @@
 # to be explicitly provided.  For example many commands only need
 # CFG_HOSTS defined
 
-export TL_DIR=/opt/opa/tools
+export TL_DIR=/usr/lib/opa-ff/tools
 
 Usage()
 {
@@ -50,4 +50,4 @@ fi
 
 proc="$1"
 shift
-TEST_CONFIG_FILE="/dev/null" TCLLIBPATH="/opt/opa/tools /usr/lib/tcl" expect -f /opt/opa/tools/front "$proc" "$@"
+TEST_CONFIG_FILE="/dev/null" TCLLIBPATH="/usr/lib/opa-ff/tools /usr/lib/tcl" expect -f /usr/lib/opa-ff/tools/front "$proc" "$@"
diff --git a/IbaTools/FastFabric/upgrade.exp b/IbaTools/FastFabric/upgrade.exp
index 9da4431..5aaf60e 100755
--- a/IbaTools/FastFabric/upgrade.exp
+++ b/IbaTools/FastFabric/upgrade.exp
@@ -95,7 +95,7 @@ proc case_cleanup { failed } {
 }
 
 test_suite "upgrade" "upgrade" "Simple upgrade of all hosts
-File: /opt/opa/tools/upgrade.exp" suite_setup noop {
+File: /usr/lib/opa-ff/tools/upgrade.exp" suite_setup noop {
 	global host
 
 	# Global Initializations for Test Suite:
@@ -117,7 +117,7 @@ File: /opt/opa/tools/upgrade.exp" suite_setup noop {
 	parallel host $env(CFG_HOSTS) {
 		test_case "$host" "upgrade to $env(CFG_RELEASE) on $host" "Upgrade to $env(CFG_RELEASE) $env(CFG_PRODUCT) on $host
 with options $env(CFG_UPGRADE_OPTIONS)
-File: /opt/opa/tools/upgrade.exp" case_setup case_cleanup {
+File: /usr/lib/opa-ff/tools/upgrade.exp" case_setup case_cleanup {
 			upvar host host
 
 			# build list of drivers.  If config says not to test a
diff --git a/IbaTools/disable_ports/opadisableports.sh b/IbaTools/disable_ports/opadisableports.sh
index 0ca120b..8a6a698 100755
--- a/IbaTools/disable_ports/opadisableports.sh
+++ b/IbaTools/disable_ports/opadisableports.sh
@@ -40,9 +40,9 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-. /opt/opa/tools/ff_funcs
+. /usr/lib/opa-ff/tools/ff_funcs
 
 lidmap="$(mktemp --tmpdir lidmapXXXXXX)"
 trap "rm -f $lidmap; exit 1" SIGHUP SIGTERM SIGINT
diff --git a/IbaTools/disable_ports/opaenableports.sh b/IbaTools/disable_ports/opaenableports.sh
index 5b38cdd..80de8aa 100755
--- a/IbaTools/disable_ports/opaenableports.sh
+++ b/IbaTools/disable_ports/opaenableports.sh
@@ -39,9 +39,9 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-. /opt/opa/tools/ff_funcs
+. /usr/lib/opa-ff/tools/ff_funcs
 
 tempfile="$(mktemp)"
 lidmap="$(mktemp --tmpdir lidmapXXXXXX)"
diff --git a/IbaTools/disable_ports/opaledports.sh b/IbaTools/disable_ports/opaledports.sh
index 7ce669a..aebf035 100755
--- a/IbaTools/disable_ports/opaledports.sh
+++ b/IbaTools/disable_ports/opaledports.sh
@@ -37,9 +37,9 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-. /opt/opa/tools/ff_funcs
+. /usr/lib/opa-ff/tools/ff_funcs
 
 #Temporary lidmap setup
 lidmap="$(mktemp --tmpdir lidmapXXXXXX)"
diff --git a/IbaTools/fabric_info/fabric_info.sh b/IbaTools/fabric_info/fabric_info.sh
index ee14c97..b5d29da 100644
--- a/IbaTools/fabric_info/fabric_info.sh
+++ b/IbaTools/fabric_info/fabric_info.sh
@@ -32,7 +32,7 @@
 # This script provides a quick summary of fabric configuration
 # it uses saquery to gather the information from the SM
 
-if [ -f /opt/opa/tools/ff_funcs ]
+if [ -f /usr/lib/opa-ff/tools/ff_funcs ]
 then
 	# optional override of defaults
 	if [ -f /etc/sysconfig/opa/opafastfabric.conf ]
@@ -40,9 +40,9 @@ then
 		. /etc/sysconfig/opa/opafastfabric.conf
 	fi
 
-	. /opt/opa/tools/opafastfabric.conf.def
+	. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-	. /opt/opa/tools/ff_funcs
+	. /usr/lib/opa-ff/tools/ff_funcs
 	ff_available=y
 else
 	ff_available=n
diff --git a/IbaTools/man/opagentopology.manPage b/IbaTools/man/opagentopology.manPage
index 7c3a63b..fafa12d 100644
--- a/IbaTools/man/opagentopology.manPage
+++ b/IbaTools/man/opagentopology.manPage
@@ -21,7 +21,7 @@ LinkSummary information includes Link, Cable, and Port information. Note that op
 .PP
 
 .br
-opaxmlgenerate -X /opt/opa/samples/opatopology\(ul1.txt -d \; -h Link -g Rate -g
+opaxmlgenerate -X /usr/lib/opa-ff/samples/opatopology\(ul1.txt -d \; -h Link -g Rate -g
 .br
 Rate\(ulInt -g MTU -g LinkDetails -h Cable -g CableLength -g CableLabel -g
 .br
@@ -33,7 +33,7 @@ NodeDesc -g PortGUID -g NodeType -g NodeType\(ulInt -g PortDetails -e Port -e Li
 .br
 
 .br
-opaxmlgenerate -X /opt/opa/samples/opatopology\(ul2.txt -d \; -h Node -g NodeGUID -g
+opaxmlgenerate -X /usr/lib/opa-ff/samples/opatopology\(ul2.txt -d \; -h Node -g NodeGUID -g
 .br
 NodeDesc -g NodeDetails -g HostName -g NodeType -g NodeType\(ulInt -g NumPorts -e Node
 
@@ -45,7 +45,7 @@ NodeDesc -g NodeDetails -g HostName -g NodeType -g NodeType\(ulInt -g NumPorts -
 .NL
 
 .PP
-This file can be found in /opt/opa/samples/ . For brevity, this sample shows only two links. The second link shows an example of omitting some information. In the second line, the MTU, LinkDetails, and other fields are not present, which is indicated by an empty value for the field (no entry between the semicolon delimiters).
+This file can be found in /usr/lib/opa-ff/samples/ . For brevity, this sample shows only two links. The second link shows an example of omitting some information. In the second line, the MTU, LinkDetails, and other fields are not present, which is indicated by an empty value for the field (no entry between the semicolon delimiters).
 .PP
 
 .B NOTE:
@@ -60,7 +60,7 @@ The following example exceeds the available width of the page. For readability,
 .NL
 
 .PP
-This file can be found in /opt/opa/samples/ . For brevity, this sample shows only two nodes.
+This file can be found in /usr/lib/opa-ff/samples/ . For brevity, this sample shows only two nodes.
 .PP
 
 .br
@@ -76,7 +76,7 @@ This file can be found in /opt/opa/samples/ . For brevity, this sample shows onl
 .NL
 
 .PP
-This file can be found in /opt/opa/samples/ . For brevity, this sample shows only two nodes.
+This file can be found in /usr/lib/opa-ff/samples/ . For brevity, this sample shows only two nodes.
 .PP
 
 .br
@@ -90,7 +90,7 @@ This file can be found in /opt/opa/samples/ . For brevity, this sample shows onl
 .NL
 
 .PP
-This file can be found in /opt/opa/samples/ . For brevity, this sample shows only one node.
+This file can be found in /usr/lib/opa-ff/samples/ . For brevity, this sample shows only one node.
 .PP
 
 .br
diff --git a/IbaTools/man/opagetvf_env.manPage b/IbaTools/man/opagetvf_env.manPage
index 41b0aee..9c2317c 100644
--- a/IbaTools/man/opagetvf_env.manPage
+++ b/IbaTools/man/opagetvf_env.manPage
@@ -17,4 +17,4 @@ Provides opagetvf\(ulfunc and opagetvf2\(ulfunc shell functions that query the p
 .PP
 A usage example is provided in:
 .PP
-/opt/opa/src/mpi\(ulapps/ofed.openmpi.params 
+/usr/lib/opa-ff/src/mpi\(ulapps/ofed.openmpi.params 
diff --git a/IbaTools/man/opascpall.manPage b/IbaTools/man/opascpall.manPage
index a22f610..a89d4f0 100644
--- a/IbaTools/man/opascpall.manPage
+++ b/IbaTools/man/opascpall.manPage
@@ -81,7 +81,7 @@ opascpall MPI-PMB /root/MPI-PMB
 .br
 # efficiently copy an entire directory tree
 .br
-opascpall -t -p /opt/opa/src/mpi\(ulapps /opt/opa/src/mpi\(ulapps
+opascpall -t -p /usr/lib/opa-ff/src/mpi\(ulapps /usr/lib/opa-ff/src/mpi\(ulapps
 .br
 # copy a group of files
 .br
diff --git a/IbaTools/man/opaverifyhosts.manPage b/IbaTools/man/opaverifyhosts.manPage
index 4e34034..9241250 100644
--- a/IbaTools/man/opaverifyhosts.manPage
+++ b/IbaTools/man/opaverifyhosts.manPage
@@ -17,7 +17,7 @@ Verifies basic node configuration and performance by running FF\(ulHOSTVERIFY\(u
 .PP
 
 .B NOTE:
-Prior to using opaverifyhosts, copy the sample file /opt/opa/samples/hostverify.sh to FF\(ulHOSTVERIFY\(ulDIR and edit it to appropriate configuration and performance expectations and select which tests to run by default. On the first run for a given node, use the -c option so that hostverify.sh gets copied to each node.
+Prior to using opaverifyhosts, copy the sample file /usr/lib/opa-ff/samples/hostverify.sh to FF\(ulHOSTVERIFY\(ulDIR and edit it to appropriate configuration and performance expectations and select which tests to run by default. On the first run for a given node, use the -c option so that hostverify.sh gets copied to each node.
 
 .PP
 FF\(ulHOSTVERIFY\(ulDIR defines both the location of hostverify.sh and the destination of the hostverify.res output file. FF\(ulHOSTVERIFY\(ulDIR is configured in the /etc/sysconfig/opa/opafastfabric.conf file.
@@ -75,7 +75,7 @@ Time limit in seconds for host to complete tests. Default is 300 seconds (5 minu
 .TP 10
  \fItest\fR 
 .NL
-One or more specific tests to run. See /opt/opa/samples/hostverify.sh for a list of available tests.
+One or more specific tests to run. See /usr/lib/opa-ff/samples/hostverify.sh for a list of available tests.
 
 .SH Examples 
 .NL
diff --git a/IbaTools/man/opaxlattopology.manPage b/IbaTools/man/opaxlattopology.manPage
index cbad867..fb80de4 100644
--- a/IbaTools/man/opaxlattopology.manPage
+++ b/IbaTools/man/opaxlattopology.manPage
@@ -17,7 +17,7 @@ Generates a topology XML file of a cluster using topology.csv, linksum\(ulswd06.
 .PP
 
 .B NOTE:
-The topology.csv input file must be present in the same directory from which the script operates, but the linksum CSV files are read from the /opt/opa/samples directory.
+The topology.csv input file must be present in the same directory from which the script operates, but the linksum CSV files are read from the /usr/lib/opa-ff/samples directory.
 
 .SH Syntax
 .NL
@@ -135,9 +135,9 @@ Prints this output.
 .NL
 
 .PP
-The opaxlattopology script reads the topology.csv file from the local directory, and reads the other files from /opt/opa/samples/linksum\(ulswd06.csv and /opt/opa/samples/linksum\(ulswd24.csv. The topology.csv file is created from the topology.xlsx spreadsheet by saving the Fabric Links tab as a .CSV file to topology.csv. A sample topology.xlsx is located in the /opt/opa/samples/ directory. Inspect the topology.csv file to ensure that each row contains the correct and same number of comma separators. Any extraneous entries in the spreadsheet can cause the CSV output to have extra fields.
+The opaxlattopology script reads the topology.csv file from the local directory, and reads the other files from /usr/lib/opa-ff/samples/linksum\(ulswd06.csv and /usr/lib/opa-ff/samples/linksum\(ulswd24.csv. The topology.csv file is created from the topology.xlsx spreadsheet by saving the Fabric Links tab as a .CSV file to topology.csv. A sample topology.xlsx is located in the /usr/lib/opa-ff/samples/ directory. Inspect the topology.csv file to ensure that each row contains the correct and same number of comma separators. Any extraneous entries in the spreadsheet can cause the CSV output to have extra fields.
 .PP
-The script outputs one or more topology files starting with topology.0:0.xml. The topology.csv input file must be present in the same directory from which the script operates, but the linksum CSV files are read from the /opt/opa/samples directory.
+The script outputs one or more topology files starting with topology.0:0.xml. The topology.csv input file must be present in the same directory from which the script operates, but the linksum CSV files are read from the /usr/lib/opa-ff/samples directory.
 .SH Example 
 .NL
 opaxlattopology
@@ -172,7 +172,7 @@ If set, it overrides default MTU on switch-to-HFI links. Default = 8192
 .NL
 
 .PP
-The linksum\(ulswd06.csv and linksum\(ulswd24.csv files are provided as stand-alone files in the /opt/opa/samples directory. However, they can be recreated (or modified) from the spreadsheet, if needed, by performing the following steps:
+The linksum\(ulswd06.csv and linksum\(ulswd24.csv files are provided as stand-alone files in the /usr/lib/opa-ff/samples directory. However, they can be recreated (or modified) from the spreadsheet, if needed, by performing the following steps:
 
 .IP 1) 4n 
 Save each of the following from the topology.xlsx file as individual .csv files:
diff --git a/IbaTools/nodeverify/nodeverify.sh b/IbaTools/nodeverify/nodeverify.sh
index e23e638..fe3d518 100755
--- a/IbaTools/nodeverify/nodeverify.sh
+++ b/IbaTools/nodeverify/nodeverify.sh
@@ -52,7 +52,7 @@ PCI_MINREADREQ=512          # expected value for PCI min read req size
 PCI_MAXREADREQ=4096         # expected value for PCI max read req size
 PCI_SPEED="8GT/s"           # expected value for PCI speed on Intel WFR HFI
 PCI_WIDTH="x16"             # expected value for PCI width on Intel WFR HFI
-MPI_APPS=/opt/opa/src/mpi_apps/ # where to find mpi_apps for HPL test
+MPI_APPS=/usr/lib/opa-ff/src/mpi_apps/ # where to find mpi_apps for HPL test
 MIN_FLOPS="115"             # minimum flops expected from HPL test
 IPOIB_IF="ib0"              # IPoIB interface to check
 IPOIB_MTU=65520             # IPoIB required MTU
@@ -176,7 +176,7 @@ then
 	done
 fi
 
-USEMEM=/opt/opa/tools/usemem	# where to find usemem tool
+USEMEM=/usr/lib/opa-ff/tools/usemem	# where to find usemem tool
 if [ -n "${debug}" ]; then
 	set -x
 	set -v
diff --git a/IbaTools/nodeverify/opaverifynodes.sh b/IbaTools/nodeverify/opaverifynodes.sh
index 49928d2..e9128af 100755
--- a/IbaTools/nodeverify/opaverifynodes.sh
+++ b/IbaTools/nodeverify/opaverifynodes.sh
@@ -31,7 +31,7 @@
 # [ICS VERSION STRING: unknown]
 
 # verify hosts basic single node configuration and performance via hostverify.sh
-# prior to using this, copy /opt/opa/samples/hostverify.sh to FF_HOSTVERIFY_DIR,
+# prior to using this, copy /usr/lib/opa-ff/samples/hostverify.sh to FF_HOSTVERIFY_DIR,
 # and edit to set proper expectations for node configuration and performance, 
 
 # optional override of defaults
@@ -40,9 +40,9 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-. /opt/opa/tools/ff_funcs
+. /usr/lib/opa-ff/tools/ff_funcs
 
 trap "exit 1" SIGHUP SIGTERM SIGINT
 
@@ -71,11 +71,11 @@ Usage_full()
 	echo "   -T timelimit - timelimit in seconds for host to complete tests" >&2
 	echo "                  default of 300 seconds (5 minutes)" >&2
 	echo "	 test - one or more specific tests to run" >&2
-	echo "	        see /opt/opa/samples/hostverify.sh for a list of available tests" >&2
+	echo "	        see /usr/lib/opa-ff/samples/hostverify.sh for a list of available tests" >&2
 	echo "This verifies basic node configuration and performance by running" >&2
 	echo "FF_HOSTVERIFY_DIR/hostverify.sh on all specified hosts" >&2
 	echo >&2
-	echo "Prior to using this, copy /opt/opa/samples/hostverify.sh to FF_HOSTVERIFY_DIR" >&2
+	echo "Prior to using this, copy /usr/lib/opa-ff/samples/hostverify.sh to FF_HOSTVERIFY_DIR" >&2
 	echo "and edit to set proper expectations for node configuration and performance" >&2
 	echo "Then be sure to use the -c option on first run for a given node" >&2
 	echo "so that hostverify.sh gets copied to each node." >&2
@@ -116,7 +116,7 @@ Usage()
 	echo "This verifies basic node configuration and performance by running" >&2
 	echo "FF_HOSTVERIFY_DIR/hostverify.sh on all specified hosts" >&2
 	echo >&2
-	echo "Prior to using this, copy /opt/opa/samples/hostverify.sh to FF_HOSTVERIFY_DIR" >&2
+	echo "Prior to using this, copy /usr/lib/opa-ff/samples/hostverify.sh to FF_HOSTVERIFY_DIR" >&2
 	echo "and edit to set proper expectations for node configuration and performance" >&2
 	echo "Then be sure to use the -c option on first run for a given node" >&2
 	echo "so that hostverify.sh gets copied to each node." >&2
diff --git a/IbaTools/opacabletest/opacabletest.sh b/IbaTools/opacabletest/opacabletest.sh
index 02e638c..77a9111 100755
--- a/IbaTools/opacabletest/opacabletest.sh
+++ b/IbaTools/opacabletest/opacabletest.sh
@@ -38,9 +38,9 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-. /opt/opa/tools/ff_funcs
+. /usr/lib/opa-ff/tools/ff_funcs
 
 tempfile="$(mktemp)"
 trap "rm -f $tempfile; exit 1" SIGHUP SIGTERM SIGINT
diff --git a/IbaTools/opacheckload/opacheckload.sh b/IbaTools/opacheckload/opacheckload.sh
index ba561f3..84773ea 100755
--- a/IbaTools/opacheckload/opacheckload.sh
+++ b/IbaTools/opacheckload/opacheckload.sh
@@ -40,9 +40,9 @@ then
    . /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-. /opt/opa/tools/ff_funcs
+. /usr/lib/opa-ff/tools/ff_funcs
 
 trap "exit 1" SIGHUP SIGTERM SIGINT
 
diff --git a/IbaTools/opafindgood/opafindgood.sh b/IbaTools/opafindgood/opafindgood.sh
index 2bb8007..18fc100 100755
--- a/IbaTools/opafindgood/opafindgood.sh
+++ b/IbaTools/opafindgood/opafindgood.sh
@@ -45,9 +45,9 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-. /opt/opa/tools/ff_funcs
+. /usr/lib/opa-ff/tools/ff_funcs
 
 trap "exit 1" SIGHUP SIGTERM SIGINT
 
@@ -200,7 +200,7 @@ function to_canon()
 
 function mycomm12()
 {
-	/opt/opa/tools/comm12 $1 $2
+	/usr/lib/opa-ff/tools/comm12 $1 $2
 }
 
 echo "$(ff_var_filter_dups_to_stdout "$HOSTS"|wc -l) hosts will be checked"
diff --git a/IbaTools/opagenchassis/opagenchassis.sh b/IbaTools/opagenchassis/opagenchassis.sh
index 951feca..daf50a1 100644
--- a/IbaTools/opagenchassis/opagenchassis.sh
+++ b/IbaTools/opagenchassis/opagenchassis.sh
@@ -42,9 +42,9 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-. /opt/opa/tools/ff_funcs
+. /usr/lib/opa-ff/tools/ff_funcs
 
 trap "exit 1" SIGHUP SIGTERM SIGINT
 
@@ -60,7 +60,7 @@ gen_chassis()
 	else
 		port_opts="-h $hfi -p $port"
 	fi
-	eval /opt/opa/tools/opachassisip $port_opts
+	eval /usr/lib/opa-ff/tools/opachassisip $port_opts
 }
 
 Usage_full()
diff --git a/IbaTools/opagenesmchassis/opagenesmchassis.sh b/IbaTools/opagenesmchassis/opagenesmchassis.sh
index b2d2ce3..79f5112 100755
--- a/IbaTools/opagenesmchassis/opagenesmchassis.sh
+++ b/IbaTools/opagenesmchassis/opagenesmchassis.sh
@@ -40,9 +40,9 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-. /opt/opa/tools/ff_funcs
+. /usr/lib/opa-ff/tools/ff_funcs
 
 trap "exit 1" SIGHUP SIGTERM SIGINT
 
diff --git a/IbaTools/opagenswitches/opagenswitches.sh b/IbaTools/opagenswitches/opagenswitches.sh
index eead575..c93e927 100644
--- a/IbaTools/opagenswitches/opagenswitches.sh
+++ b/IbaTools/opagenswitches/opagenswitches.sh
@@ -45,16 +45,16 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-. /opt/opa/tools/ff_funcs
+. /usr/lib/opa-ff/tools/ff_funcs
 
 ## Defines:
 OPAEXPAND_FILE="/usr/sbin/opaexpandfile"
 OPA_REPORT="/usr/sbin/opareport"
 OPASAQUERY="/usr/sbin/opasaquery"
 XML_EXTRACT="/usr/sbin/opaxmlextract"
-GEN_OPASWITCHES_HELPER="/opt/opa/tools/opagenswitcheshelper"
+GEN_OPASWITCHES_HELPER="/usr/lib/opa-ff/tools/opagenswitcheshelper"
 FILE_OPASWITCHES=$(mktemp "opagensw-file_switches-XXXX")
 FILE_OPASWITCHES2=$(mktemp "opagensw-file_switches2-XXXX")
 FILE_LINKSUM_LEAF_EDGE=$(mktemp "opagensw-linksum_leaf_edge-XXXX.csv")
diff --git a/IbaTools/opalinkanalysis/opalinkanalysis.sh b/IbaTools/opalinkanalysis/opalinkanalysis.sh
index cbd66fa..c7038db 100755
--- a/IbaTools/opalinkanalysis/opalinkanalysis.sh
+++ b/IbaTools/opalinkanalysis/opalinkanalysis.sh
@@ -38,9 +38,9 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-. /opt/opa/tools/ff_funcs
+. /usr/lib/opa-ff/tools/ff_funcs
 
 tempfile="$(mktemp)"
 trap "rm -f $tempfile; exit 1" SIGHUP SIGTERM SIGINT
diff --git a/IbaTools/opareport/opareports.sh b/IbaTools/opareport/opareports.sh
index bc8c42d..8ad70ab 100644
--- a/IbaTools/opareport/opareports.sh
+++ b/IbaTools/opareport/opareports.sh
@@ -38,9 +38,9 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-. /opt/opa/tools/ff_funcs
+. /usr/lib/opa-ff/tools/ff_funcs
 
 trap "exit 1" SIGHUP SIGTERM SIGINT
 
diff --git a/IbaTools/opatop/opatop.c b/IbaTools/opatop/opatop.c
index f634dee..d2025d9 100644
--- a/IbaTools/opatop/opatop.c
+++ b/IbaTools/opatop/opatop.c
@@ -116,7 +116,7 @@ OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 #define DEBUG_IMGID			0x0002			// Display single image ID
 #define DEBUG_IMGID_2		0x0004			// Display multiple image IDs
 
-#define PATH_HELP		"/opt/opa/help/"
+#define PATH_HELP		"/usr/lib/opa-ff/help/"
 // if help files are bigger than this, extra will be silently ignored
 #define MAX_HELP_CHARS	10240	// allows for about 10x growth
 #define MAX_HELP_LINES	999	// allows for about 10x growth
diff --git a/IbaTools/opaxlattopology/opaxlattopology.sh b/IbaTools/opaxlattopology/opaxlattopology.sh
index 8a34795..a1ce577 100755
--- a/IbaTools/opaxlattopology/opaxlattopology.sh
+++ b/IbaTools/opaxlattopology/opaxlattopology.sh
@@ -87,8 +87,8 @@
 ## Defines:
 XML_GENERATE="/usr/sbin/opaxmlgenerate"
 FILE_TOPOLOGY_LINKS="topology.csv"
-FILE_LINKSUM_SWD06="/opt/opa/samples/linksum_swd06.csv"
-FILE_LINKSUM_SWD24="/opt/opa/samples/linksum_swd24.csv"
+FILE_LINKSUM_SWD06="/usr/lib/opa-ff/samples/linksum_swd06.csv"
+FILE_LINKSUM_SWD24="/usr/lib/opa-ff/samples/linksum_swd24.csv"
 FILE_LINKSUM="linksum.csv"
 FILE_LINKSUM_NOCORE="linksum_nocore.csv"
 FILE_LINKSUM_NOCABLE="linksum_nocable.csv"
diff --git a/IbaTools/opaxmlgenerate/README.topology b/IbaTools/opaxmlgenerate/README.topology
index 39cf8fa..87d1e46 100644
--- a/IbaTools/opaxmlgenerate/README.topology
+++ b/IbaTools/opaxmlgenerate/README.topology
@@ -1,6 +1,6 @@
 A sample use of opaxmlgenerate is provided in the script opagentopology,
 which is in /sbin.  The script invokes opaxmlgenerate, directing it to
-read the following CSV input files which are in /opt/opa/samples:
+read the following CSV input files which are in /usr/lib/opa-ff/samples:
 
 opatopology_links.txt contains the text CSV values for LinkSummary information.
 opatopology_FIs.txt contains the text CSV values for HFI Nodes information.
diff --git a/IbaTools/opaxmlgenerate/opagentopology.sh b/IbaTools/opaxmlgenerate/opagentopology.sh
index 2317837..01d65f2 100644
--- a/IbaTools/opaxmlgenerate/opagentopology.sh
+++ b/IbaTools/opaxmlgenerate/opagentopology.sh
@@ -68,17 +68,17 @@ fi
 echo '<?xml version="1.0" encoding="utf-8" ?>'
 echo '<Topology>'
 echo '<LinkSummary>'
-/usr/sbin/opaxmlgenerate -X /opt/opa/samples/opatopology_links.txt -d \; -h Link -g Rate -g MTU -g Internal -g LinkDetails -h Cable -g CableLength -g CableLabel -g CableDetails -e Cable -h Port -g NodeGUID -g PortNum -g NodeDesc -g PortGUID -g NodeType -g PortDetails -e Port -h Port -g NodeGUID -g PortNum -g NodeDesc -g PortGUID -g NodeType -g PortDetails -e Port -e Link
+/usr/sbin/opaxmlgenerate -X /usr/lib/opa-ff/samples/opatopology_links.txt -d \; -h Link -g Rate -g MTU -g Internal -g LinkDetails -h Cable -g CableLength -g CableLabel -g CableDetails -e Cable -h Port -g NodeGUID -g PortNum -g NodeDesc -g PortGUID -g NodeType -g PortDetails -e Port -h Port -g NodeGUID -g PortNum -g NodeDesc -g PortGUID -g NodeType -g PortDetails -e Port -e Link
 echo '</LinkSummary>'
 echo '<Nodes>'
 echo '<FIs>'
-/usr/sbin/opaxmlgenerate -X /opt/opa/samples/opatopology_FIs.txt -d \; -h Node -g NodeGUID -g NodeDesc -g NodeDetails -e Node
+/usr/sbin/opaxmlgenerate -X /usr/lib/opa-ff/samples/opatopology_FIs.txt -d \; -h Node -g NodeGUID -g NodeDesc -g NodeDetails -e Node
 echo '</FIs>'
 echo '<Switches>'
-/usr/sbin/opaxmlgenerate -X /opt/opa/samples/opatopology_SWs.txt -d \; -h Node -g NodeGUID -g NodeDesc -g NodeDetails -e Node
+/usr/sbin/opaxmlgenerate -X /usr/lib/opa-ff/samples/opatopology_SWs.txt -d \; -h Node -g NodeGUID -g NodeDesc -g NodeDetails -e Node
 echo '</Switches>'
 echo '<SMs>'
-/usr/sbin/opaxmlgenerate -X /opt/opa/samples/opatopology_SMs.txt -d \; -h SM -g NodeGUID -g PortNum -g NodeDesc -g PortGUID -g NodeType -g SMDetails -e SM
+/usr/sbin/opaxmlgenerate -X /usr/lib/opa-ff/samples/opatopology_SMs.txt -d \; -h SM -g NodeGUID -g PortNum -g NodeDesc -g PortGUID -g NodeType -g SMDetails -e SM
 echo '</SMs>'
 echo '</Nodes>'
 echo '</Topology>'
diff --git a/IbaTools/saquery/opashowmc.sh b/IbaTools/saquery/opashowmc.sh
index 2de7d00..d60bc6e 100755
--- a/IbaTools/saquery/opashowmc.sh
+++ b/IbaTools/saquery/opashowmc.sh
@@ -39,9 +39,9 @@ then
 	. /etc/sysconfig/opa/opafastfabric.conf
 fi
 
-. /opt/opa/tools/opafastfabric.conf.def
+. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 
-. /opt/opa/tools/ff_funcs
+. /usr/lib/opa-ff/tools/ff_funcs
 
 trap "exit 1" SIGHUP SIGTERM SIGINT
 
diff --git a/LINUX/opacapture.sh b/LINUX/opacapture.sh
index 7e23cc5..7d7d1a6 100755
--- a/LINUX/opacapture.sh
+++ b/LINUX/opacapture.sh
@@ -66,9 +66,9 @@ then
 fi
 
 
-if [ -f /opt/opa/tools/ff_funcs ]
+if [ -f /usr/lib/opa-ff/tools/ff_funcs ]
 then
-	. /opt/opa/tools/ff_funcs
+	. /usr/lib/opa-ff/tools/ff_funcs
 	ff_available=y
 else
 	ff_available=n
@@ -81,7 +81,7 @@ then
 		. $CONFIG_DIR/opa/opafastfabric.conf
 	fi
 	
-	. /opt/opa/tools/opafastfabric.conf.def
+	. /usr/lib/opa-ff/tools/opafastfabric.conf.def
 fi
 
 detail=1
diff --git a/Moab/README b/Moab/README
index 9be5ec5..1c82939 100644
--- a/Moab/README
+++ b/Moab/README
@@ -93,7 +93,7 @@ clean up of these temporary host files is the responsibility of the user.
 
    
 Here are some examples of how to call the scripts and pass vFabric parameters (Note, these examples
-utilize the proprietary MPI applications, which are located in the /opt/opa/src/mpi_apps/
+utilize the proprietary MPI applications, which are located in the /usr/lib/opa-ff/src/mpi_apps/
 directory.  These MPI applications were provided specifically for administrative use only):
 
 
diff --git a/Moab/iba_select_mpi b/Moab/iba_select_mpi
index bd07e58..faf2861 100755
--- a/Moab/iba_select_mpi
+++ b/Moab/iba_select_mpi
@@ -73,10 +73,10 @@ find_mpi()
 # defaults we use for MPI (QuickSilver, openmpi, mvapich1, mvapich2)
 if [ -z "$MPICH_PREFIX" ]
 then
-	if test -f /opt/opa/bin/mpirun_rsh && ! rpm -q kernel-ib >/dev/null 2>&1
+	if test -f /usr/lib/opa-ff/bin/mpirun_rsh && ! rpm -q kernel-ib >/dev/null 2>&1
 	then
 		# QuickSilver MPI
-		MPICH_PREFIX=/opt/opa
+		MPICH_PREFIX=/usr/lib/opa-ff
 	fi
 	# by default MPI gets installed using same stack prefix as OFED
 	prefix=$(/etc/infiniband/info 2>/dev/null|grep '^prefix='|cut -f2 -d=)
diff --git a/ShmemApps/apps/README b/ShmemApps/apps/README
index 9e175bb..af0f668 100644
--- a/ShmemApps/apps/README
+++ b/ShmemApps/apps/README
@@ -87,7 +87,7 @@ mpi-selector" for details on those commmands).
 To use mpi-selector with these scripts, add this line to your .bashrc
 file:
 
-source /opt/opa/src/mpi_apps/get_selected_mpi.sh
+source /usr/lib/opa-ff/src/mpi_apps/get_selected_mpi.sh
 
 
 
@@ -118,4 +118,4 @@ For example, to run the barrier test, simply type:
 # ./run_barrier 2
 
 The scripts log the output of the SHMEM programs to the 
-/opt/opa/src/shmem_apps/logs directory.
+/usr/lib/opa-ff/src/shmem_apps/logs directory.
diff --git a/TestTools/basic.exp b/TestTools/basic.exp
index 6010991..939cd69 100755
--- a/TestTools/basic.exp
+++ b/TestTools/basic.exp
@@ -178,8 +178,8 @@ proc chassis_wait_reboot_done { chassis } {
 	# use a local shell for ping to verify chassis comes back
 	# it reboots too fast for us to observe it go away
 	local_sh
-	if { [ auto_execok /opt/opa/tools/opagetipaddrtype ] != "" } {
-		send_unix_cmd "/opt/opa/tools/opagetipaddrtype $chassis"
+	if { [ auto_execok /usr/lib/opa-ff/tools/opagetipaddrtype ] != "" } {
+		send_unix_cmd "/usr/lib/opa-ff/tools/opagetipaddrtype $chassis"
 		set out [expect_any 60 {"ipv6" "ipv4" } {"Error:" "Usage:"}]
 		regexp {([ip]+)([A-Za-z0-9]+)} $out iptype 
 	} else {
diff --git a/TestTools/chassis.exp b/TestTools/chassis.exp
index 65821d2..9ee7184 100755
--- a/TestTools/chassis.exp
+++ b/TestTools/chassis.exp
@@ -1408,9 +1408,9 @@ proc check_esm_config { config_file } {
 
 	global env
 
-	if { [ file exists "/opt/opa/fm_tools/config_check" ] } {
+	if { [ file exists "/usr/lib/opa-ff/fm_tools/config_check" ] } {
 		set env(IFS_FM_BASE) ""
-		set tooldir "/opt/opa/fm_tools"
+		set tooldir "/usr/lib/opa-ff/fm_tools"
 	} elseif { [ file exists "/etc/sysconfig/opa/opafm.info" ] } {
 		log_message {bash -c '. /etc/sysconfig/opa/opafm.info >/dev/null 2>&1; echo $IFS_FM_BASE'}
 		set env(IFS_FM_BASE) [exec bash -c {. /etc/sysconfig/opa/opafm.info >/dev/null 2>&1; echo $IFS_FM_BASE} ]
diff --git a/TestTools/extmng.exp b/TestTools/extmng.exp
index b2ffb69..e3ffc16 100755
--- a/TestTools/extmng.exp
+++ b/TestTools/extmng.exp
@@ -482,7 +482,7 @@ proc get_switch_getportconfig { ibnode } {
 
 		global env
 
-		set toolsdir /opt/opa/tools
+		set toolsdir /usr/lib/opa-ff/tools
 
 		set out_msg ""
 
@@ -530,7 +530,7 @@ proc get_switch_info { ibnode } {
 
 		global env
 
-		set toolsdir /opt/opa/tools
+		set toolsdir /usr/lib/opa-ff/tools
 
 		set out_msg ""
 
@@ -783,7 +783,7 @@ proc get_switch_hwvpd { ibnode } {
 ##	
 		global env
 
-		set toolsdir /opt/opa/tools
+		set toolsdir /usr/lib/opa-ff/tools
 
 		local_sh
 
@@ -835,7 +835,7 @@ proc get_switch_ping { ibnode { hfi_port ""} { report "1" } { ignore_pass "0" }
 ##	
 		global env
 
-		set toolsdir /opt/opa/tools
+		set toolsdir /usr/lib/opa-ff/tools
 
 		local_sh
 
@@ -899,7 +899,7 @@ proc get_switch_fwverify { ibnode } {
 ##	
 		global env
 
-		set toolsdir /opt/opa/tools
+		set toolsdir /usr/lib/opa-ff/tools
 
 		local_sh
 
@@ -965,7 +965,7 @@ proc get_switch_capture { ibnode upload_file } {
 ##	
 		global env
 
-		set toolsdir /opt/opa/tools
+		set toolsdir /usr/lib/opa-ff/tools
 
 		local_sh
 
@@ -1040,7 +1040,7 @@ File: TestTools/extmng.exp" case_setup case_cleanup {
 		set trimmed_ibnode [ trim_opaswitch_hfi_port "$ibnode" ]
 		local_sh_exit
 
-		set toolsdir /opt/opa/tools
+		set toolsdir /usr/lib/opa-ff/tools
 
 		set brand [get_switch_brand "$ibnode"]
 		if { [ string equal "$brand" "OPA"] } {
@@ -1198,7 +1198,7 @@ File: TestTools/extmng.exp" case_setup case_cleanup {
 
 		global env
 
-		set toolsdir /opt/opa/tools
+		set toolsdir /usr/lib/opa-ff/tools
 
 		local_sh
 
@@ -1456,7 +1456,7 @@ File: TestTools/extmng.exp" case_setup case_cleanup {
         upvar args args
         upvar norecords norecords
 
-		set toolsdir /opt/opa/tools
+		set toolsdir /usr/lib/opa-ff/tools
 
 		local_sh
 
diff --git a/TestTools/front.sh b/TestTools/front.sh
index b19ac3c..25bb49f 100755
--- a/TestTools/front.sh
+++ b/TestTools/front.sh
@@ -76,7 +76,7 @@ if { [ file exists $env(TL_DIR)/TestTools/ibtools.exp ] } {
 	# HostTests
 	source $env(TL_DIR)/TestTools/ibtools.exp
 } else {
-	# Fast Fabric, TL_DIR is set to /opt/opa/tools
+	# Fast Fabric, TL_DIR is set to /usr/lib/opa-ff/tools
 	source $env(TL_DIR)/ibtools.exp
 }
 
diff --git a/TestTools/ibtools.exp b/TestTools/ibtools.exp
index 2c16b3f..6d7e22e 100644
--- a/TestTools/ibtools.exp
+++ b/TestTools/ibtools.exp
@@ -41,7 +41,7 @@ if { [file exists $env(TL_DIR)/TestTools)] } {
 	# HostTests environment
 	set ibtools_dir $env(TL_DIR)/TestTools
 } else {
-	# in fastfabric, TL_DIR is set to /opt/opa/tools
+	# in fastfabric, TL_DIR is set to /usr/lib/opa-ff/tools
 	set ibtools_dir $env(TL_DIR)
 }
 
diff --git a/TestTools/install.exp b/TestTools/install.exp
index 8e74e9b..9590013 100755
--- a/TestTools/install.exp
+++ b/TestTools/install.exp
@@ -174,7 +174,7 @@ proc install_uninstall { {uninstall 1} {remove_config 0} { dir "" } } {
 ##	0 - success
 ##	-code error on failure
 
-	set toolsdir /opt/opa/tools
+	set toolsdir /usr/lib/opa-ff/tools
 
 	if { $uninstall } {
 		# use ics_ib to remove if possible
diff --git a/TestTools/mpi.exp b/TestTools/mpi.exp
index 3d7fe8d..120d54e 100755
--- a/TestTools/mpi.exp
+++ b/TestTools/mpi.exp
@@ -254,7 +254,7 @@ File: TestTools/mpi.exp" case_setup case_cleanup {
 
 		if { ! [ info exists env(FF_MPI_APPS_DIR) ]
 			|| [ string equal "$env(FF_MPI_APPS_DIR)" "" ] } {
-			set env(FF_MPI_APPS_DIR) "/opt/opa/src/mpi_apps"
+			set env(FF_MPI_APPS_DIR) "/usr/lib/opa-ff/src/mpi_apps"
 		}
 
 		if { [ catch {unix_cmd 20 0 "test -e $env(FF_MPI_APPS_DIR)/mvapich2.params"} res ] == 0 } {
@@ -470,7 +470,7 @@ proc test_case_run_intelmpi_mpi_app { transport host host_list timelimit dir mpi
 		
 		if { ! [ info exists env(FF_MPI_APPS_DIR) ]
 			|| [ string equal "$env(FF_MPI_APPS_DIR)" "" ] } {
-			set env(FF_MPI_APPS_DIR) "/opt/opa/src/mpi_apps"
+			set env(FF_MPI_APPS_DIR) "/usr/lib/opa-ff/src/mpi_apps"
 		}
 
 		if { [ catch {unix_cmd 20 0 "test -e $env(FF_MPI_APPS_DIR)/intelmpi.params"} res ] == 0 } {
@@ -606,7 +606,7 @@ File: TestTools/mpi.exp" case_setup case_cleanup {
 	
 		if { ! [ info exists env(FF_MPI_APPS_DIR) ]
 			|| [ string equal "$env(FF_MPI_APPS_DIR)" "" ] } {
-			set env(FF_MPI_APPS_DIR) "/opt/opa/src/mpi_apps"
+			set env(FF_MPI_APPS_DIR) "/usr/lib/opa-ff/src/mpi_apps"
 		}
 
 		if { [ catch {unix_cmd 20 0 "test -e $env(FF_MPI_APPS_DIR)/openmpi.params"} res ] == 0 } {
diff --git a/TestTools/network.exp b/TestTools/network.exp
index 347754e..93a9e2d 100755
--- a/TestTools/network.exp
+++ b/TestTools/network.exp
@@ -81,7 +81,7 @@ File: TestTools/network.exp" case_setup case_cleanup {
 			# allow ping of self
 			test_item "$desthost" "$host to $desthost" "simple ping from $host to $desthost" noop noop {
 				set netdest "[ host_basename $desthost ]$suffix"
-				send_unix_cmd "/opt/opa/tools/opagetipaddrtype $netdest"
+				send_unix_cmd "/usr/lib/opa-ff/tools/opagetipaddrtype $netdest"
 				set out [expect_any 60 {"ipv6" "ipv4" } {"Error:" "Usage:"}]
 				regexp {([ip]+)([A-Za-z0-9]+)} $out iptype
 				if { $iptype == "ipv4" } {
diff --git a/TestTools/proc_mgr.exp b/TestTools/proc_mgr.exp
index a6100f8..5dd1dee 100755
--- a/TestTools/proc_mgr.exp
+++ b/TestTools/proc_mgr.exp
@@ -351,7 +351,7 @@ set qlgc_fork exp_fork
 set qlgc_wait exp_wait
 if { ! [ catch { set thread_tcl $tcl_platform(threaded) } result] } {
 	# Our own TCL extension to work around fork issues
-	#load /opt/opa/tools/libqlgc_fork.so
+	#load /usr/lib/opa-ff/tools/libqlgc_fork.so
 	package require qlgc_fork
 	set qlgc_fork qlgc_fork
 	set qlgc_wait qlgc_wait
diff --git a/opa-ff.spec b/opa-ff.spec
index c96df35..8fa1cc8 100644
--- a/opa-ff.spec
+++ b/opa-ff.spec
@@ -96,7 +96,7 @@ fi
 #rm -rf $RPM_BUILD_ROOT
 mkdir -p $RPM_BUILD_ROOT%{_bindir}
 mkdir -p $RPM_BUILD_ROOT%{_sbindir}
-mkdir -p $RPM_BUILD_ROOT/opt/opa/{tools,fm_tools,help,samples,src/mpi_apps,src/shmem_apps}
+mkdir -p $RPM_BUILD_ROOT/usr/lib/opa-ff/{tools,fm_tools,help,samples,src/mpi_apps,src/shmem_apps}
 mkdir -p $RPM_BUILD_ROOT%{_libdir}/ibacm
 mkdir -p $RPM_BUILD_ROOT%{_sysconfdir}/rdma
 mkdir -p $RPM_BUILD_ROOT%{_sysconfdir}/opa
@@ -112,7 +112,7 @@ cd $(cat %{_builddir}/RELEASE_PATH)
 
 cd bin
 cp -t $RPM_BUILD_ROOT%{_sbindir} %basic_tools_sbin 
-cp -t $RPM_BUILD_ROOT/opt/opa/tools/ %basic_tools_opt
+cp -t $RPM_BUILD_ROOT/usr/lib/opa-ff/tools/ %basic_tools_opt
 ln -s ./opaportinfo $RPM_BUILD_ROOT%{_sbindir}/opaportconfig
 ln -s ./opasmaquery $RPM_BUILD_ROOT%{_sbindir}/opapmaquery
 
@@ -121,26 +121,26 @@ cp -t $RPM_BUILD_ROOT%{_bindir} %opasadb_bin
 cp -t $RPM_BUILD_ROOT%{_includedir}/infiniband %opasadb_header
 
 cd ../bin
-cp -t $RPM_BUILD_ROOT/opt/opa/tools/ %ff_tools_opt
+cp -t $RPM_BUILD_ROOT/usr/lib/opa-ff/tools/ %ff_tools_opt
 
 cd ../fastfabric
 cp -t $RPM_BUILD_ROOT%{_sbindir} %ff_tools_sbin
-cp -t $RPM_BUILD_ROOT/opt/opa/tools/ %ff_tools_misc
-cp -t $RPM_BUILD_ROOT/opt/opa/help %help_doc
+cp -t $RPM_BUILD_ROOT/usr/lib/opa-ff/tools/ %ff_tools_misc
+cp -t $RPM_BUILD_ROOT/usr/lib/opa-ff/help %help_doc
 
 cd ../etc
-cp -t $RPM_BUILD_ROOT/opt/opa/fm_tools/ %ff_tools_fm
-ln -s /opt/opa/fm_tools/config_check $RPM_BUILD_ROOT%{_sbindir}/opafmconfigcheck 
-ln -s /opt/opa/fm_tools/config_diff $RPM_BUILD_ROOT%{_sbindir}/opafmconfigdiff
+cp -t $RPM_BUILD_ROOT/usr/lib/opa-ff/fm_tools/ %ff_tools_fm
+ln -s /usr/lib/opa-ff/fm_tools/config_check $RPM_BUILD_ROOT%{_sbindir}/opafmconfigcheck 
+ln -s /usr/lib/opa-ff/fm_tools/config_diff $RPM_BUILD_ROOT%{_sbindir}/opafmconfigdiff
 
 cd ../fastfabric/samples
-cp -t $RPM_BUILD_ROOT/opt/opa/samples %ff_iba_samples
+cp -t $RPM_BUILD_ROOT/usr/lib/opa-ff/samples %ff_iba_samples
 cd ..
 
 cd ../fastfabric/tools
-cp -t $RPM_BUILD_ROOT/opt/opa/tools/ %ff_tools_exp
-cp -t $RPM_BUILD_ROOT/opt/opa/tools/ %ff_libs_misc
-cp -t $RPM_BUILD_ROOT/opt/opa/tools/ osid_wrapper
+cp -t $RPM_BUILD_ROOT/usr/lib/opa-ff/tools/ %ff_tools_exp
+cp -t $RPM_BUILD_ROOT/usr/lib/opa-ff/tools/ %ff_libs_misc
+cp -t $RPM_BUILD_ROOT/usr/lib/opa-ff/tools/ osid_wrapper
 cp -t $RPM_BUILD_ROOT%{_sysconfdir}/sysconfig/opa allhosts chassis esm_chassis hosts ports switches opaff.xml
 cd ..
 
@@ -153,7 +153,7 @@ cd ..
 
 
 cd ../src/shmem/shmem_apps
-tar -xzf shmem_apps.tgz -C $RPM_BUILD_ROOT/opt/opa/src/shmem_apps/
+tar -xzf shmem_apps.tgz -C $RPM_BUILD_ROOT/usr/lib/opa-ff/src/shmem_apps/
 cd ../../
 
 #Config files
@@ -170,7 +170,7 @@ cp -t $RPM_BUILD_ROOT%{_libdir}/ibacm libdsap.so.*
 # Now that we've put everything in the buildroot, copy any default config files to their expected location for user
 # to edit. To prevent nuking existing user configs, the files section of this spec file will reference these as noreplace
 # config files.
-cp $RPM_BUILD_ROOT/opt/opa/tools/opafastfabric.conf.def $RPM_BUILD_ROOT%{_sysconfdir}/sysconfig/opa/opafastfabric.conf
+cp $RPM_BUILD_ROOT/usr/lib/opa-ff/tools/opafastfabric.conf.def $RPM_BUILD_ROOT%{_sysconfdir}/sysconfig/opa/opafastfabric.conf
 
 #Now we do a bunch of work to build the file listing of what belongs to each RPM
 
@@ -179,8 +179,8 @@ echo "%{_sbindir}/%{basic_tools_sbin} %{basic_tools_sbin_sym}" > %{_builddir}/ba
 sed -i 's;[ ];\n%{_sbindir}/;g' %{_builddir}/basic_sbin_file.list 
 
 #Basic tools opt
-echo "/opt/opa/tools/%{basic_tools_opt}" > %{_builddir}/basic_opt_file.list
-sed -i 's;[ ];\n/opt/opa/tools/;g' %{_builddir}/basic_opt_file.list 
+echo "/usr/lib/opa-ff/tools/%{basic_tools_opt}" > %{_builddir}/basic_opt_file.list
+sed -i 's;[ ];\n/usr/lib/opa-ff/tools/;g' %{_builddir}/basic_opt_file.list 
 
 #Basic man pages
 echo "%{_mandir}/man1/%{basic_mans}" > %{_builddir}/basic_mans.list
@@ -188,28 +188,28 @@ sed -i 's;[ ];\n%{_mandir}/man1/;g' %{_builddir}/basic_mans.list
 sed -i 's;\.1;\.1*;g' %{_builddir}/basic_mans.list
 
 #FF tools opt
-echo "/opt/opa/tools/%{ff_tools_opt}" > %{_builddir}/ff_opt_file.list
-sed -i 's;[ ];\n/opt/opa/tools/;g' %{_builddir}/ff_opt_file.list
+echo "/usr/lib/opa-ff/tools/%{ff_tools_opt}" > %{_builddir}/ff_opt_file.list
+sed -i 's;[ ];\n/usr/lib/opa-ff/tools/;g' %{_builddir}/ff_opt_file.list
 
 #FF exp files opt
-echo "/opt/opa/tools/%{ff_tools_exp}" > %{_builddir}/ff_tools_exp.list
-sed -i 's;[ ];\n/opt/opa/tools/;g' %{_builddir}/ff_tools_exp.list 
+echo "/usr/lib/opa-ff/tools/%{ff_tools_exp}" > %{_builddir}/ff_tools_exp.list
+sed -i 's;[ ];\n/usr/lib/opa-ff/tools/;g' %{_builddir}/ff_tools_exp.list 
 
 #FF misc files opt
-echo "/opt/opa/tools/%{ff_tools_misc}" > %{_builddir}/ff_tools_misc.list
-sed -i 's;[ ];\n/opt/opa/tools/;g' %{_builddir}/ff_tools_misc.list 
+echo "/usr/lib/opa-ff/tools/%{ff_tools_misc}" > %{_builddir}/ff_tools_misc.list
+sed -i 's;[ ];\n/usr/lib/opa-ff/tools/;g' %{_builddir}/ff_tools_misc.list 
 
 #FF libs misc
-echo "/opt/opa/tools/%{ff_libs_misc}" > %{_builddir}/ff_libs_misc.list
-sed -i 's;[ ];\n/opt/opa/tools/;g' %{_builddir}/ff_libs_misc.list 
+echo "/usr/lib/opa-ff/tools/%{ff_libs_misc}" > %{_builddir}/ff_libs_misc.list
+sed -i 's;[ ];\n/usr/lib/opa-ff/tools/;g' %{_builddir}/ff_libs_misc.list 
 
 #FF iba samples
-echo "/opt/opa/samples/%{ff_iba_samples}" > %{_builddir}/ff_iba_samples.list
-sed -i 's;[ ];\n/opt/opa/samples/;g' %{_builddir}/ff_iba_samples.list 
+echo "/usr/lib/opa-ff/samples/%{ff_iba_samples}" > %{_builddir}/ff_iba_samples.list
+sed -i 's;[ ];\n/usr/lib/opa-ff/samples/;g' %{_builddir}/ff_iba_samples.list 
 
 #FF tools to FM configuration
-echo "/opt/opa/fm_tools/%{ff_tools_fm}" > %{_builddir}/ff_tools_fm.list
-sed -i 's;[ ];\n/opt/opa/fm_tools/;g' %{_builddir}/ff_tools_fm.list 
+echo "/usr/lib/opa-ff/fm_tools/%{ff_tools_fm}" > %{_builddir}/ff_tools_fm.list
+sed -i 's;[ ];\n/usr/lib/opa-ff/fm_tools/;g' %{_builddir}/ff_tools_fm.list 
 
 #FF man pages
 echo "%{_mandir}/man8/%{ff_mans}" > %{_builddir}/ff_mans.list
@@ -221,16 +221,16 @@ cat %{_builddir}/basic_sbin_file.list %{_builddir}/basic_opt_file.list > %{_buil
 
 
 #FF tools help doc
-echo "/opt/opa/help/%{help_doc}" > %{_builddir}/ff_help_file.list
-sed -i 's;[ ];\n/opt/opa/help/;g' %{_builddir}/ff_help_file.list 
+echo "/usr/lib/opa-ff/help/%{help_doc}" > %{_builddir}/ff_help_file.list
+sed -i 's;[ ];\n/usr/lib/opa-ff/help/;g' %{_builddir}/ff_help_file.list 
 
 #FF tools sbin
 echo "%{_sbindir}/%{ff_tools_sbin}" > %{_builddir}/ff_sbin_file.list
 sed -i 's;[ ];\n%{_sbindir}/;g' %{_builddir}/ff_sbin_file.list
 
 #ShmemApps
-echo "/opt/opa/src/shmem_apps/%{shmem_apps_files}" > %{_builddir}/ff_shmem_apps.list
-sed -i 's;[ ];\n/opt/opa/src/shmem_apps/;g' %{_builddir}/ff_shmem_apps.list 
+echo "/usr/lib/opa-ff/src/shmem_apps/%{shmem_apps_files}" > %{_builddir}/ff_shmem_apps.list
+sed -i 's;[ ];\n/usr/lib/opa-ff/src/shmem_apps/;g' %{_builddir}/ff_shmem_apps.list 
 
 #Final file listing for 'ff'
 cat %{_builddir}/ff_shmem_apps.list %{_builddir}/ff_sbin_file.list %{_builddir}/ff_help_file.list %{_builddir}/ff_tools_exp.list %{_builddir}/ff_tools_misc.list %{_builddir}/ff_libs_misc.list %{_builddir}/ff_iba_samples.list %{_builddir}/ff_mans.list %{_builddir}/ff_tools_fm.list %{_builddir}/ff_opt_file.list > %{_builddir}/ff_file.list
@@ -241,7 +241,7 @@ cat %{_builddir}/ff_shmem_apps.list %{_builddir}/ff_sbin_file.list %{_builddir}/
 %postun address-resolution -p /sbin/ldconfig
 
 %preun fastfabric
-cd /opt/opa/src/mpi_apps >/dev/null 2>&1
+cd /usr/lib/opa-ff/src/mpi_apps >/dev/null 2>&1
 make -k clean >/dev/null 2>&1 || : # suppress all errors and return codes from the make clean.
 
 %files basic-tools -f %{_builddir}/basic_file.list
@@ -257,7 +257,7 @@ make -k clean >/dev/null 2>&1 || : # suppress all errors and return codes from t
 %config(noreplace) %{_sysconfdir}/sysconfig/opa/ports
 %config(noreplace) %{_sysconfdir}/sysconfig/opa/switches
 %config(noreplace) %{_sysconfdir}/sysconfig/opa/opaff.xml
-%config(noreplace) /opt/opa/tools/osid_wrapper
+%config(noreplace) /usr/lib/opa-ff/tools/osid_wrapper
 %{_sbindir}/opafmconfigcheck
 %{_sbindir}/opafmconfigdiff
 
-- 
2.7.4

