From 9af7f4f3214d9448fbbbc253dda11000732b3aed Mon Sep 17 00:00:00 2001
From: Honggang Li <honli@redhat.com>
Date: Thu, 19 Apr 2018 11:43:34 +0800
Subject: [PATCH] update ff-install script

Signed-off-by: Honggang Li <honli@redhat.com>
---
 OpenIb_Host/ff_filegroups.sh | 20 ++------------------
 OpenIb_Host/ff_install.sh    | 11 -----------
 2 files changed, 2 insertions(+), 29 deletions(-)

diff --git a/OpenIb_Host/ff_filegroups.sh b/OpenIb_Host/ff_filegroups.sh
index 225a63cbea0c..aa5d6280749b 100644
--- a/OpenIb_Host/ff_filegroups.sh
+++ b/OpenIb_Host/ff_filegroups.sh
@@ -1,5 +1,5 @@
 basic_tools_sbin="opacapture opafabricinfo opagetvf opagetvf_env opahfirev
-	opapacketcapture opaportinfo oparesolvehfiport opasaquery opasmaquery
+	opaportinfo oparesolvehfiport opasaquery opasmaquery
 	opainfo"
 
 basic_tools_sbin_sym="opapmaquery opaportconfig"
@@ -9,7 +9,7 @@ basic_tools_opt="setup_self_ssh usemem opaipcalc"
 basic_lib_opa_opt=".comp_fastfabric.pl .comp_oftools.pl"
 
 basic_mans="opacapture.1 opaconfig.1 opafabricinfo.1 opagetvf.1
-	opagetvf_env.1 opahfirev.1 opainfo.1 opapacketcapture.1 opapmaquery.1
+	opagetvf_env.1 opahfirev.1 opainfo.1 opapmaquery.1
 	opaportconfig.1 opaportinfo.1 oparesolvehfiport.1 opasaquery.1
 	opasmaquery.1"
 
@@ -92,19 +92,3 @@ opamgt_iba_headers="ib_mad.h ib_sa_records.h ib_sd.h ib_sm_types.h
 opamgt_iba_public_headers="datatypes.h datatypes_osd.h ibyteswap.h ibyteswap_osd.h
 	ilist.h imath.h imemory.h imemory_osd.h ipackoff.h ipackon.h ispinlock.h
 	ispinlock_osd.h statustext.h iethernet.h"
-
-opamgt_examples="paquery.c saquery.c simple_sa_query.c simple_sa_notice.c simple_pa_query.c
-	job_schedule.c show_switch_cost_matrix.c Makefile README"
-
-mpi_apps_files="Makefile mpi_hosts.sample README prepare_run select_mpi run_bw
-	get_selected_mpi.sh get_mpi_cc.sh *.params gen_group_hosts gen_mpi_hosts
-	mpi_cleanup stop_daemons hpl_dat_gen config_hpl2 run_hpl2 run_lat run_pmb run_imb run_lat2
-	run_bw2 run_bibw2 run_bcast2 run_app runmyapp mpicheck run_mpicheck run_deviation
-	run_multibw run_mpi_stress run_osu run_cabletest run_allhfilatency run_nxnlatbw
-	run_alltoall3 run_bcast3 run_bibw3 run_bw3 run_lat3 run_mbw_mr3 run_multi_lat3
-	run_batch_script run_batch_cabletest hpl-count.diff groupstress deviation
-	hpl-config/HPL.dat-* hpl-config/README"
-
-shmem_apps_files="Makefile mpi_hosts.sample prepare_run README select_mpi run_barrier
-	run_get_bibw run_get_bw run_get_latency run_put_bibw run_put_bw run_put_latency
-	run_reduce run_hello run_alltoall shmem-hello.c"
diff --git a/OpenIb_Host/ff_install.sh b/OpenIb_Host/ff_install.sh
index ae86a899ad27..412be5812108 100755
--- a/OpenIb_Host/ff_install.sh
+++ b/OpenIb_Host/ff_install.sh
@@ -28,10 +28,8 @@ mkdir -p ${DESTDIR}/etc/rdma
 mkdir -p ${DESTDIR}/etc/opa
 mkdir -p ${DESTDIR}/usr/include/infiniband
 mkdir -p ${DESTDIR}/usr/include/opamgt/iba/public
-mkdir -p ${DESTDIR}/usr/src/opamgt
 mkdir -p ${DESTDIR}/usr/share/man/man1
 mkdir -p ${DESTDIR}/usr/share/man/man8
-mkdir -p ${DESTDIR}/usr/src/opa/{mpi_apps,shmem_apps}
 
 # Copy the comp.pl file before changing directories
 cp -t ${DESTDIR}/usr/lib/opa OpenIb_Host/.comp_fastfabric.pl
@@ -55,7 +53,6 @@ cd ../opamgt
 cp -t ${DESTDIR}/usr/include/opamgt $opamgt_headers
 cp -t ${DESTDIR}/usr/include/opamgt/iba $opamgt_iba_headers
 cp -t ${DESTDIR}/usr/include/opamgt/iba/public $opamgt_iba_public_headers
-cp -t ${DESTDIR}/usr/src/opamgt $opamgt_examples
 
 OPAMGT_VERNO_MAJOR=$(cat version | cut -d . -f 1)
 
@@ -91,14 +88,6 @@ cd ../man8
 cp -t ${DESTDIR}/usr/share/man/man8 $ff_mans
 cd ..
 
-cd ../src/mpi/mpi_apps
-tar -xzf mpi_apps.tgz -C ${DESTDIR}/usr/src/opa/mpi_apps/
-cd ../../
-
-cd ../src/shmem/shmem_apps
-tar -xzf shmem_apps.tgz -C ${DESTDIR}/usr/src/opa/shmem_apps/
-cd ../../
-
 #Config files
 cd ../config
 cp -t ${DESTDIR}/etc/rdma dsap.conf
-- 
2.15.0-rc1

